<!doctype html>
<html lang="ja">
<head>
<title>WEB版VOICEVOX</title>
<meta charset="utf-8">
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="VOICEVOXをWEB上で利用できるサイト | WEB版VOICEVOXの Main Page | ずんだもん、">
<link rel="icon" href="https://www.voicevox.su-shiki.com/favicon.png">
<link rel="stylesheet" href="https://static.tts.quest/blocks.css">
<style type="text/css">
.loader {
  position: relative;
  overflow: hidden;
}
.loader::before {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 100;
  content: "";
  display: block;
  height: 100%;
  width: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.4),
    transparent
  );
  animation: animloader 1s linear infinite;
}
@keyframes animloader {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}
textarea {
    width: 80vw;
    height: 3em;
}
select {
    width: 80vw;
    font-size: 1.3em;
}
button {
    font-size: 1em;
}
 
 
 
.radio-box-fieldset {
    border: none;
    text-align: center;
}
 
.radio-box-input {
    clip: rect(1px, 1px, 1px, 1px);
    position: absolute !important;
}
 
.radio-box-label {
    display: inline-block;
    padding: 0.5rem 1rem;
    margin-right: 1vw;
    border-radius: 3px;
    transition: all .2s;
}
 
.radio-box-input:checked + .radio-box-label {
    background: #222;
    color: #fff;
    text-shadow: 0 0 1px rgba(0,0,0,.7);
}
.radio-box-input:not(:checked) + .radio-box-label {
    background: #eee;
    color: #000;
    text-shadow: 0 0 1px rgba(0,0,0,.7);
    border-width: 1px;
    border-style: groove;
    border-color: #000
}
 
.radio-box-input:focus + .radio-box-label {
    outline-color: #4D90FE;
    outline-style: auto;
    outline-width: 1px;
}
</style>
<link href="/js/abcjs-audio.css" media="all" rel="stylesheet" type="text/css" />
<script src="/js/abcjs-basic-min.js" type="text/javascript"></script>
</head>
<body>
<dialog id="dialog">
<div align="right"><span id="dialogX" style="cursor: pointer;">(X)</span></div>
<div id="dialogPayload" style="margin: 1px 1px 25px 1px;"></div>
<center><span id="dialogClose" style="cursor: pointer;">(閉じる)</span></center>
</dialog>
<script src="https://js.hcaptcha.com/1/api.js?hl=ja&recaptchacompat=off"></script>
<script src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit"></script>
<div id="invisibleCaptcha"></div>
<script>
var dialog=document.getElementById("dialog");dialog.payload=document.getElementById("dialogPayload"),document.getElementById("dialogX").addEventListener("click",e=>{dialog.close()}),document.getElementById("dialogClose").addEventListener("click",e=>{dialog.close()}),dialog.addEventListener("click",e=>{let t=dialog.getBoundingClientRect();(e.clientX<t.left||e.clientX>t.right||e.clientY<t.top||e.clientY>t.bottom)&&dialog.close()}),dialog.doModal=e=>{dialog.close(),dialog.payload.innerHTML=e,dialog.showModal()};class RSA_OAEP{static generate(e){let t={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}};return crypto.subtle.generateKey(t,e,["encrypt","decrypt"])}static async encrypt(e,t){for(var i=this.#a(e),a=[],s=[],n=0;n<=Math.floor((i.byteLength-1)/214);n++)s[n]=this.#b(i.slice(214*n,(n+1)*214),t);for(var n=0;n<s.length;n++)a[n]=await s[n];return await new Blob(a).arrayBuffer()}static #b(e,t){return void 0!==t.publicKey&&(t=t.publicKey),window.crypto.subtle.encrypt({name:"RSA-OAEP"},t,e)}static async decrypt(e,t){for(var i=[],a=[],s=0;s<e.byteLength/256;s++)a[s]=this.#c(e.slice(256*s,(s+1)*256),t);for(var s=0;s<a.length;s++)i[s]=await a[s];var n=new Blob(i);return this.#d(await n.arrayBuffer())}static async #c(i,a){return void 0!==a.privateKey&&(a=a.privateKey),await window.crypto.subtle.decrypt({name:"RSA-OAEP"},a,i)}static import(e){return window.crypto.subtle.importKey("jwk",e,{name:"RSA-OAEP",hash:{name:"SHA-1"}},e.ext,e.key_ops)}static export(e){return window.crypto.subtle.exportKey("jwk",e)}static #a(s){return new TextEncoder().encode(s).buffer}static #d(n){return new TextDecoder().decode(n)}}class Flage{static fromBMP(e){var t=e.slice(138,142);return t=65536*(t=new Uint8Array(t))[1]+256*t[2]+t[3],e.slice(142,142+t)}}class TtsapisV1Alpha{#e;#f;#g;#h;#i;constructor(){this.#e="https://ttsapis.com/v1/alpha",this.#h=this.#j(),this.#i=!0}getIsInitialized(){return this.#i}getEndpoint(){return this.#e}setEndpoint(e){this.#e=e}getKeys(){return this.#f}getPubJwk(){return this.#g}setInitArray(e){this.#h=e}async #j(){this.#f=await RSA_OAEP.generate(!1);var r,d=await RSA_OAEP.export(this.#f.publicKey);this.#g={n:d.n,...d};var o=await fetch(this.#e,{method:"GET",headers:{"ttsapis-encrypt":JSON.stringify(this.#g)}}).catch(e=>{ttsapisV1Alpha.onInitError()&&(dialog.close(),dialog.payload.innerHTML="<h3>通信に失敗しました。</h3><p>時間をおいて、ページをリロードしてください。</p>"+e,dialog.showModal())}),c=await new Response(o.body).arrayBuffer();if("image/bmp"==o.headers.get("content-type")){var h=Flage.fromBMP(c);console.log(h),r=await RSA_OAEP.decrypt(h,this.#f)}else r=await RSA_OAEP.decrypt(c,this.#f);var u=JSON.parse(r);return u.a[u.b][u.c](u.d)(u.e[u.f])}onCreate(){console.log("onCreate")}onRestore(){console.log("onRestore")}onError(){console.log("onError")}onInitError(){return console.log("onInitError"),!1}onInitCaptcha(){return console.log("Captcha"),!1}}(ttsapisV1Alpha=new TtsapisV1Alpha).version="5.0.1";class DraggableSVG{#k;svg;textGroup;partition;boxGroup;#l;#m;#n;#o;#p;#q;#r;#s;#t;#u;#v;#i;constructor(e,t){this.#k=e,this.#i=!1;var i=parseFloat(getComputedStyle(e).width),a=10*parseFloat(getComputedStyle(e).fontSize);this.#m=i,this.#l=a,window.addEventListener("resize",t=>{var i=parseFloat(getComputedStyle(e).width),a=10*parseFloat(getComputedStyle(e).fontSize);this.resize(i,a)}),this.#v=0,this.#s=!1,this.#q=0,this.#r=0,this.#t=0,this.#u=0,this.#n=t,this.#o=t,this.#p=[],this.svg=this.elem("svg"),this.svg.setAttribute("height",a),this.svg.setAttribute("width",i),this.svg.style.touchAction="pinch-zoom",this.svg.style.userSelect="none",this.textGroup=this.elem("g"),this.partition=this.elem("rect"),this.partition.setAttribute("fill-opacity",0),this.partition.setAttribute("stroke-width",10),this.partition.setAttribute("stroke","#a5d4ad"),this.partition.setAttribute("height",a),this.partition.setAttribute("width",i),this.boxGroup=this.elem("g"),this.svg.appendChild(this.textGroup),this.svg.appendChild(this.partition),this.svg.appendChild(this.boxGroup),this.svg.addEventListener("mousedown",e=>{this.#w(e.clientX,e.clientY)}),this.svg.addEventListener("touchstart",e=>{this.#w(e.changedTouches[0].clientX,e.changedTouches[0].clientY)},{passive:!0}),this.svg.addEventListener("mousemove",e=>{this.#x(e.clientX,e.clientY)}),this.svg.addEventListener("touchmove",e=>{this.#x(e.changedTouches[0].clientX,e.changedTouches[0].clientY)},{passive:!0}),document.addEventListener("mouseup",e=>{this.#y()}),document.addEventListener("touchend",e=>{this.#y()},{passive:!0}),e.appendChild(this.svg),this.#i=!0}destructor(){for(var e=0;e<this.#p.length;e++)this.#p[e].destructor(),this.#p[e]=null;this.#p=[]}build(){this.destructor();for(var e=this.#l/3,t=this.#q+e/4,i=this.#r+9*e/8,a=0;a<this.#n.length;a++)this.#p[a]=new DraggableAccentPhrase(this,t,i,e,this.#n[a]),this.#p[a].n=a,t+=e+this.#p[a].getWidth();this.#v=t-this.#q}split(e,t,i){var a=this.#n;this.#n=[];for(var s=0;s<a.length+1;s++)s<e?this.#n[s]=this.#p[s].getAccentPhrase():s==e?this.#n[s]=t:s==e+1?this.#n[s]=i:this.#n[s]=this.#p[s-1].getAccentPhrase();this.build()}join(e){if(0!=e&&!this.#p[e-1].isEnd()){var t=this.#n;this.#n=[];var i=this.#p[e-1].getAccentPhrase().moras,a=this.#p[e].getAccentPhrase().moras,s=this.#p[e-1].getAccentPhrase().accent,n=this.#p[e].getAccentPhrase().accent,r=this.#p[e].getAccentPhrase();r.moras=[...i,...a],r.accent=s,s==i.length&&(r.accent=i.length+n);for(var d=0;d<t.length-1;d++)d<e-1?this.#n[d]=this.#p[d].getAccentPhrase():d==e-1?this.#n[d]=r:this.#n[d]=this.#p[d+1].getAccentPhrase();this.build()}}getAccentPhrases(){var e=this.#n;this.#n=[];for(var t=0;t<e.length;t++)this.#n[t]=this.#p[t].getAccentPhrase();return this.#n}setAccentPhrases(e){this.#n=e,this.build()}resize(e,t){e&&t&&(this.#m=e,this.#l=t,this.svg.setAttribute("height",t),this.svg.setAttribute("width",e),this.partition.setAttribute("height",t),this.partition.setAttribute("width",e),this.build())}isAnyGrabbed(){for(var e=!1,t=0;t<this.#p.length;t++)e|=this.#p[t].isAnyGrabbed();return e}dx(e){if((!(e>0)||!(this.#q>0))&&(!(e<0)||!(this.#q<this.#m-this.#v))){this.#q+=e;for(var t=0;t<this.#p.length;t++)this.#p[t].dx(e)}}#w(l,$){this.#t=l,this.#u=$,this.#s=!0}#x(p,b){if(this.#s&&!this.isAnyGrabbed()){var m=p-this.#t,v=b-this.#u;this.#t=p,this.#u=b,this.dx(m),this.#z(0,-v)}else this.isAnyGrabbed()&&(this.#s=!1)}static isScrollSuppressed=!0;async #z(g,f){if(DraggableSVG.isScrollSuppressed)return;let y=window.scrollX,x=window.scrollY;window.scrollBy(g,f);let _=window.scrollX,O=window.scrollY,E=e=>new Promise(t=>setTimeout(t,e));await E(10);let S=window.scrollX,k=window.scrollY;100>Math.abs(y+g-_)&&100>Math.abs(_-S)&&100>Math.abs(x+f-O)&&100>Math.abs(O-k)||(await E(1e3),DraggableSVG.#A({beforeX:y,afterX:_,afterSleepX:S,beforeY:x,afterY:O,afterSleepY:k,dx:g,dy:f}))}static #B=!1;static #A(V){if(DraggableSVG.#B||(DraggableSVG.#B=!0,localStorage.getItem("overScrolled")))return;var A={ua:navigator.userAgent,overScrolled:V,platform:navigator.platform,version:ttsapisV1Alpha.version};Voicevox.update({answerEnquete:A});let C=V.afterSleepX-V.beforeX,j=V.afterSleepY-V.beforeY;dialog.doModal(`
            <h3>異常な画面移動が検知されました</h3>
            <p>本来X方向に${V.dx}px、Y方向に${V.dy}px移動すべきところを、
            <br>X方向に${C}px、Y方向に${j}px移動したことを検知しました。</p>
            <div><h4>この差は許容範囲内ですか？</h4>
            <button onclick="DraggableSVG.answer('Acceptable', 'yes', this);">許容できる</button> 
            <button onclick="DraggableSVG.answer('Acceptable', 'no', this);">許容できない</button></div>
            <div><h4>スクロールを抑制しますか？</h4>
            <p>スクロールを抑制することによって、
            <br>急激な画面移動を抑えることができます。</p>
            <p>機能のOn/Offや詳細設定は、【設定】から変更できます。</p>
            <button onclick="DraggableSVG.answer('Suppression', 'yes', this);">抑制する</button>
            </div>
            <h4>詳細を報告</h4>
            <button onclick="Voicevox.update({getEnqueteId: true});">汎用回答欄</button>
            <h4>今後表示しない</h4>
            <p>
            <input type="checkbox" id="overScrolled" onclick="localStorage.setItem('overScrolled', 'never');DraggableSVG.answer('NeverShowAgain', 'yes');setTimeout(()=>dialog.close(), 100);"> <label for="overScrolled">今後表示しない</label>
            </p>
        `)}static #C(){dialog.doModal(`
            <h3>スクロールを抑制アンケート</h3>
            <div><h4>スクロール抑制はどうですか？</h4>
            <p>スクロールを抑制することによって、
            <br>全体的に使いやすくなりましたか？</p>
            <button onclick="DraggableSVG.answer('IsSuppressionGood', 'yes', this);">使いやすい</button> 
            <button onclick="DraggableSVG.answer('IsSuppressionGood', 'same', this);">変わらない</button> 
            <button onclick="DraggableSVG.answer('IsSuppressionGood', 'no', this);">使いにくい</button> 
            <p>機能のOn/Offや詳細設定は、【設定】から変更できます。</p>
            </div>
            <h4>詳細を報告</h4>
            <p>直感に反する挙動はありましたか？
            <br>改善すべき点があれば、ご教示ください。</p>
            <button onclick="Voicevox.update({getEnqueteId: true});">汎用回答欄</button>
            <br>
        `)}static answer(e,t,i){i&&i.parentElement.remove(),"Suppression"==e&&(DraggableSVG.isScrollSuppressed=!0,setTimeout(()=>DraggableSVG.#C(),6e4));var a={};a[e="overScrolled"+e]=t,"overScrolledIsSuppressionGood"==e&&(a.Voicevox={isScrollSuppressed:Voicevox.isScrollSuppressed},a.DraggableSVG={isScrollSuppressed:DraggableSVG.isScrollSuppressed}),a.overScrolledHasAnswer=!0,Voicevox.update({answerEnquete:a})}#y(){this.#s=!1}elem(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}}class DraggableAccentPhrase{#k;#q;#r;#D;#E;#F;#l;#m;constructor(e,t=0,i=0,a=0,s){this.#k=e,this.#q=t,this.#r=i,this.#D=a,this.#l=3*a/2,this.#m=0,this.#E=s,this.#F=[],this.build()}destructor(){for(var e=0;e<this.#F.length;e++)this.#F[e].destructor(),this.#F[e]=null;this.#F=[]}build(){for(var e=0;e<this.#F.length;e++)this.#F[e].destructor();for(var t=this.#E.moras,e=0;e<t.length;e++){var i=t[e].text;e==t.length-1&&(this.#E.is_interrogative?i+="？":null!==this.#E.pause_mora&&(i+=this.#E.pause_mora.text)),this.#F[e]=new DraggableString(this.#k,this.#q,this.#r,this.#D,i),this.#F[e].setMaxMoveRange(this.#D),this.#F[e].n=e,this.#F[e].ondragged=e=>{e.dy>this.#D/3&&this.setAccent(e.n),e.dy<-this.#D/3&&this.setAccent(e.n+1),e.dx>this.#D/2&&this.split(e.n),e.dx<-this.#D/2&&this.#k.join(this.n),this.arrange()}}this.setAccent(this.getAccent())}split(e){if(0!=e){var t=this.#E.accent,i=this.#E.accent-e,a=this.#E.moras,s={moras:[],accent:t,pause_mora:null,is_interrogative:!1},n=this.#E;n.moras=[],n.accent=i;for(var r=0;r<a.length;r++)r<e?s.moras[r]=a[r]:n.moras[r-e]=a[r];this.#k.split(this.n,s,n)}}arrange(){this.arrangeX(),this.arrangeY()}arrangeX(){for(var e=0,t=0;t<this.#F.length;t++)this.#F[t].setX(this.#q+e),e+=this.#F[t].getWidth();this.#m=e}arrangeY(){for(var e=0;e<this.#F.length;e++)1==this.#E.accent&&0==e?this.#F[e].setY(this.#r-this.#D/2):1==this.#E.accent&&0!=e?this.#F[e].setY(this.#r):1!=this.#E.accent&&0==e?this.#F[e].setY(this.#r):e<this.#E.accent?this.#F[e].setY(this.#r-this.#D/2):this.#F[e].setY(this.#r)}getAccent(e){return this.#E.accent}setAccent(e){0<e&&e<=this.#F.length?this.#E.accent=e:this.#E.accent=this.#F.length,this.arrange()}getWidth(){return this.#m}getHeight(){return this.#l}getAccentPhrase(){return this.#E}isEnd(){return null!==this.#E.pause_mora}dx(e){this.#q+=e;for(var t=0;t<this.#F.length;t++)this.#F[t].dx(e)}isAnyGrabbed(){for(var e=!1,t=0;t<this.#F.length;t++)e|=this.#F[t].getIsGrabbed();return e}}class DraggableString{#k;#G;#H;#q;#r;#D;#I;#J;#K;#t;#u;#L;#M;#s;#l;#m;ondragged;constructor(e,t=0,i=0,a=0,s=""){this.#k=e,this.#q=t,this.#r=i,this.#D=a,this.#I=0,this.#K=1e18,this.#J="",this.#H=this.#k.elem("rect"),this.#H.x.baseVal.value=this.#q,this.#H.y.baseVal.value=this.#r,this.#H.style.cursor="pointer",this.#H.setAttribute("opacity",0),this.#H.height.baseVal.value=this.#l=this.#D,this.#m=this.#D*this.#I/2,this.#H.width.baseVal.value=this.#m,this.#G=this.#k.elem("text"),this.#G.setAttribute("x",this.#q),this.#G.setAttribute("y",this.#r+.9*this.#D),this.#G.setAttribute("font-size",this.#D),this.#G.innerHTML=this.#J,e.textGroup.appendChild(this.#G),e.boxGroup.appendChild(this.#H),this.#t=0,this.#u=0,this.#s=!1,this.#H.addEventListener("mousedown",e=>{this.#w(e.clientX,e.clientY)}),this.#H.addEventListener("touchstart",e=>{this.#w(e.changedTouches[0].clientX,e.changedTouches[0].clientY)},{passive:!0}),e.svg.addEventListener("mousemove",e=>{this.#x(e.clientX,e.clientY)}),e.svg.addEventListener("touchmove",e=>{this.#x(e.changedTouches[0].clientX,e.changedTouches[0].clientY)},{passive:!0}),document.addEventListener("mouseup",e=>{this.#y()}),document.addEventListener("touchend",e=>{this.#y()},{passive:!0}),this.ondragged=function(){},this.setText(s)}destructor(){this.#k.textGroup.removeChild(this.#G),this.#G=null,this.#k.boxGroup.removeChild(this.#H),this.#H=null}move(e,t){this.setX(e),this.setY(t)}dx(e){this.move(this.#q+e,this.#r)}pdx(e){e>0&&this.dx(e)}ndx(e){e<0&&this.dx(e)}dy(e){this.move(this.#q,this.#r+e)}pdy(e){e>0&&this.dy(e)}ndy(e){e<0&&this.dy(e)}getX(){return this.#q}setX(e){this.#q=e,this.#H.x.baseVal.value=this.#q,this.#G.x.baseVal[0].value=this.#q}getY(){return this.#r}setY(e){this.#r=e,this.#H.y.baseVal.value=this.#r,this.#G.y.baseVal[0].value=this.#r+.9*this.#D}getHeight(){return this.#l}getWidth(){return this.#m}getSize(){return this.#D}setSize(e){this.#D=e,this.#H.height.baseVal.value=this.#l=this.#D,this.#m=this.#D*this.#I/2,this.#H.width.baseVal.value=this.#m,this.#G.setAttribute("font-size",this.#D),this.#G.y.baseVal[0].value=this.#r+.9*this.#D}getMaxMoveRange(){return Math.sqrt(this.#K)}setMaxMoveRange(e){this.#K=e*e}getText(){return this.#J}setText(e){this.#I=0;for(var t=0;t<e.length;t++)e[t].match(/[ -~]/)?this.#I+=1:this.#I+=2;this.#J=e,this.#G.innerHTML=this.#J,this.#m=this.#D*this.#I/2,this.#H.width.baseVal.value=this.#m}showBox(){this.#H.setAttribute("fill","blue"),this.#H.setAttribute("opacity",.1)}hideBox(){this.#H.setAttribute("opacity",0)}justBox(e,t,i,a){setText(""),move(e,t),this.#D=void 0,this.#H.height.baseVal.value=this.#l=height,this.#H.width.baseVal.value=this.#m=width}getIsGrabbed(){return this.#s}#w(w,T){this.#s=!0,this.#G.setAttribute("opacity",.5),this.#t=w,this.#u=T,this.#L=this.#q,this.#M=this.#r,document.addEventListener("touchmove",this.#N,{passive:!1})}#x(M,I){if(this.#s){var L=M-this.#t,P=I-this.#u;this.#t=M,this.#u=I;var H=(this.#q+L-this.#L)*(this.#q+L-this.#L),N=(this.#r+P-this.#M)*(this.#r+P-this.#M);this.move(this.#q+L,this.#r+P),H+N>this.#K&&this.#y()}}#y(){this.#s&&(this.#s=!1,this.#G.setAttribute("opacity",1),this.ondragged({x:this.#q,y:this.#r,dx:this.#q-this.#L,dy:this.#r-this.#M,n:this.n}),document.removeEventListener("touchmove",this.#N))}#N(D){D.preventDefault()}}class Voicevox extends Audio{#O;#P;#G;#Q;#n;#k;#R;#S;#T;#U;#V;#W;#X;#Y;#Z;#$;#_;#aa;#ab;#ac;#ad;#ae;#af;#ag;#ah;#ai;#aj;#ak;#al;#am;#an;#ao;#ap;#aq;#ar;#as;#at;#au;#av;#aw;#ax;#ay;#az;#aA;static instances=[];static isNemo=!1;static isSongOnly=!1;static isTalkOnly=!1;static chars;static isShowId=!1;static isFixedPauseMora=!1;static #aB=.01;static isAnyAudioAvailable=!1;constructor(e){super(),Voicevox.instances.push(this),this.#k=e,this.#S={now:{},priv:{}},this.id=Voicevox.#aC(16),this.setAttribute("name","VOICEVOX"),this.#G="voicevox",this.#Q="voicevox",this.controls=!0,this.autoplay=!0,this.#aj=Voicevox.isNemo,this.#aq=Voicevox.isSongOnly,this.#ar=Voicevox.isTalkOnly,this.#ak=!1,this.#n=[],this.#at="388f246b-8c41-4ac1-8e2d-5d79f3ff56d9",this.#j()}async #j(){this.#k.innerHTML="",this.#al=document.createElement("div"),this.#am=document.createElement("div"),this.#au=document.createElement("div"),this.#au.hidden=!0;var X=document.createElement("div");X.id=Voicevox.#aC(16),this.#Y=document.createElement("div"),this.#Y.id=Voicevox.#aC(16),this.#$=document.createElement("div"),this.#$.id=Voicevox.#aC(16),this.#_=document.createElement("span"),this.#_.id=Voicevox.#aC(16),this.#av=document.createElement("textarea"),this.#av.placeholder="プロンプトを入力",this.#aw=document.createElement("button"),this.#aw.innerHTML="生成",this.#aw.addEventListener("click",e=>{this.#aD()}),this.#ax=document.createElement("span"),this.#Z=document.createElement("textarea"),this.#Z.id=Voicevox.#aC(16),this.#Z.setAttribute("aria-label","合成する文章を入力"),this.#ab=document.createElement("div"),this.#ab.id=Voicevox.#aC(16),this.#T=document.createElement("button"),this.#T.id=Voicevox.#aC(16),this.#T.innerHTML="合成",this.#T.addEventListener("click",e=>{this.synthesis()}),this.#ao=document.createElement("button"),this.#ao.id=Voicevox.#aC(16),this.#ao.innerHTML="楽譜から合成",this.#ao.setAttribute("disabled",!0),this.#ao.addEventListener("click",e=>{this.frameSynthesis()}),this.#ap=document.createElement("span"),this.#ap.id=Voicevox.#aC(16),this.#U=document.createElement("select"),this.#U.id=Voicevox.#aC(16),this.#U.setAttribute("aria-label","キャラクターを選択"),this.#V=document.createElement("select"),this.#V.id=Voicevox.#aC(16),this.#V.setAttribute("aria-label","キャラクターのスタイルを選択"),this.#W=document.createElement("select"),this.#W.id=Voicevox.#aC(16),this.#W.setAttribute("aria-label","プリセットを選択"),this.#aE().forEach(e=>{var t=document.createElement("option");t.value=e,t.innerHTML=this.#aF(e),this.#U.appendChild(t)}),this.#U.addEventListener("change",e=>{this.#V.updateOptions(e.target.value),this.#W.updateOptions(),this.#aG()}),this.#V.addEventListener("change",e=>{this.#W.updateOptions(),this.#aG()}),this.#W.addEventListener("change",e=>{this.#aG(),"edit"==e.target.value?this.#aH():"edit-speaker"==e.target.value?this.#aI():this.#aJ(),"ask-ai"==e.target.value?this.#aK():this.#aL()}),this.#V.updateOptions=e=>{this.#V.innerHTML="",this.#aL(),this.#aM(e).forEach((e,t)=>{if((!this.#aq||"talk"!=e.type)&&(!this.#ar||"talk"==e.type)){var i=document.createElement("option");i.value=e.id;var a="";"sing"==e.type&&(a="ソング"),"frame_decode"==e.type&&(a="ハミング");var s="";Voicevox.isShowId&&(s=` {id: ${e.id}}`),i.innerHTML=e.name+a+s,this.#V.appendChild(i)}})},this.#W.updateOptions=()=>{this.#aJ(),this.#W.innerHTML="",this.#aL();var e=!1,t="voicevox_talk_";let i=this.#V.value;3e3<=i&&i<=9e3&&(e=!0,t="voicevox_song_");var a=t=>e?" ("+Math.round(100*t.songTempo)/100+", "+Math.round(100*t.songKey)/100+", "+Math.round(100*t.songVolume)/100+")":" ("+Math.round(100*t.speedScale)/100+", "+Math.round(100*t.pitchScale)/100+", "+Math.round(100*t.intonationScale)/100+")",s=t+"style_preset_"+this.#V.value;localStorage.getItem(s)&&JSON.parse(localStorage.getItem(s)).forEach((e,t)=>{var i=document.createElement("option");i.value=JSON.stringify(e);var s=a(e);i.innerHTML=e.name+s,this.#W.appendChild(i)}),s=t+"character_preset_"+this.#U.value,localStorage.getItem(s)&&JSON.parse(localStorage.getItem(s)).forEach((e,t)=>{var i=document.createElement("option");i.value=JSON.stringify(e);var s=a(e);i.innerHTML=e.name+s,this.#W.appendChild(i)}),s=t+"preset",localStorage.getItem(s)&&JSON.parse(localStorage.getItem(s)).forEach((e,t)=>{var i=document.createElement("option");i.value=JSON.stringify(e);var s=a(e);i.innerHTML=e.name+s,this.#W.appendChild(i)});var n=document.createElement("option");n.value=JSON.stringify({speedScale:1,pitchScale:0,intonationScale:1,songTempo:120,songKey:0,songVolume:0}),n.innerHTML="標準 (1, 0, 1)",e&&(n.innerHTML="標準 (120, 0, 0)"),this.#W.appendChild(n);var r=document.createElement("option");r.value="edit",r.innerHTML="【プリセットを追加】",this.#W.appendChild(r);var d=document.createElement("option");d.value="edit-speaker",d.innerHTML="【話者を並び替え】",this.#W.appendChild(d);var o=document.createElement("option");o.value="ask-ai",o.innerHTML="【文章生成AI】",e&&(o.innerHTML="【楽譜生成AI】"),this.#W.appendChild(o)},this.#V.updateOptions(this.#aE()[0]),this.#W.updateOptions(),this.addEventListener("canplay",e=>{this.#aN()}),this.addEventListener("play",e=>{if("[]"==this.#S.priv.ap){this.#S.priv.speaker=parseInt(this.#V.value),this.#S.priv.text=this.#Z.value,this.#S.priv.ap=JSON.stringify(this.#R.getAccentPhrases()),this.#aO();return}this.#S.now.speaker=parseInt(this.#V.value),this.#S.now.text=this.#Z.value,this.#S.now.ap=JSON.stringify(this.#R.getAccentPhrases()),this.#S.priv.speaker!=this.#S.now.speaker||this.#S.priv.text!=this.#S.now.text||this.#S.priv.ap!=this.#S.now.ap?this.#aP():this.#aO()}),this.#as=document.createElement("span"),this.#as.id=Voicevox.#aC(16),this.#k.appendChild(this.#U),this.#k.appendChild(this.#V),this.#k.appendChild(this.#W),this.#k.appendChild(this.#ab),this.#au.appendChild(this.#av),this.#au.appendChild(this.#aw),this.#au.appendChild(this.#ax),this.#k.appendChild(this.#au),this.#al.appendChild(this.#Z),this.#al.appendChild(this.#T),this.#al.appendChild(this.#_),this.#al.appendChild(this.#Y),this.#k.appendChild(this.#al),this.#an=new NoteABC(this.#am),this.#an.onBeforeMakeScore=()=>{this.#aQ(),this.#ao.removeAttribute("disabled")},this.#am.appendChild(this.#ao),this.#am.appendChild(this.#ap),this.#k.appendChild(this.#am),this.#R=new DraggableSVG(this.#Y,[]),this.#k.appendChild(X),X.appendChild(this),this.#k.appendChild(this.#$),this.#k.appendChild(this.#as),this.#aG()}setSynthesisButtonTitle(e){this.#T.innerHTML=Voicevox.#aR(e)}synthesis(){this.#aS(),this.updateText(),this.updateSpeaker(),this.updateScale(),this.#$.innerHTML=this.getSpeakerName()+" "+this.getSpeakerTerm(),this.#G==this.#Q?(this.#n=this.#R.getAccentPhrases(),this.updateAudioWav()):this.updateAccentPhrases(),this.#S.priv.speaker=parseInt(this.#V.value),this.#S.priv.text=this.#Z.value,this.#S.priv.ap="[]"}frameSynthesis(){this.#aS(),this.updateScale(),this.#G=this.#an.getText(),this.updateSpeaker(),this.#$.innerHTML=this.getSpeakerName()+" "+this.getSpeakerTerm(),this.#aT()}#aG(){let B=this.#V.value;3e3<=B&&B<=9e3?this.#aU():this.#aV()}#aU(){this.#ak=!0,this.#am.removeAttribute("hidden"),this.#al.setAttribute("hidden",!0)}#aV(){this.#ak=!1,this.#al.removeAttribute("hidden"),this.#am.setAttribute("hidden",!0)}#aP(){this.#_.innerHTML="再生中の音声は、変更点が反映されていません。"}#aO(){"再生中の音声は、変更点が反映されていません。"==this.#_.innerHTML&&(this.#_.innerHTML="")}#aS(){this.#k.setAttribute("class","loader"),this.#U.setAttribute("disabled",!0),this.#V.setAttribute("disabled",!0),this.#W.setAttribute("disabled",!0),this.#Z.setAttribute("disabled",!0),this.#T.setAttribute("disabled",!0)}#aN(){this.#U.removeAttribute("disabled"),this.#V.removeAttribute("disabled"),this.#W.removeAttribute("disabled"),this.#Z.removeAttribute("disabled"),this.#T.removeAttribute("disabled"),this.#k.removeAttribute("class","loader")}enable(){this.#_.innerHTML="",this.#ap.innerHTML="",this.#Q="",this.#aN()}clearNotifications(){this.#_.innerHTML="",this.#ap.innerHTML=""}setNotification(e){this.#_.innerHTML=e,this.#ap.innerHTML=e}static update(e){setTimeout(Voicevox.update,100,e)}static lookup(e,t,i){var a=document.createElement("span");a.id=Voicevox.#aC(16),a.setUrl=async e=>{var a=await fetch(e).catch(()=>{i&&i(e)});if(200==a.status){var s=await a.json();t&&t(s)}else i&&i(e)},document.body.appendChild(a),e.id=a.id,Voicevox.update({lookup:e})}updateVersion(){Voicevox.update({voicevoxVersion:{id:this.id}})}async setVersion(e){var t=await fetch(e);this.#O=await t.json()}getVersion(){return this.#O}updateSpeaker(){this.#P=parseInt(this.#V.value)}setSpeaker(e){this.#P=e}getSpeaker(){return this.#P}getSpeakerName(){var e=this.#U.value;return this.#aF(e)}getSpeakerTerm(){var e=this.#U.value;return this.#aW(e)}#aF(z){return Voicevox.chars[z].prefix+Voicevox.chars[z].name}#aW(G){return Voicevox.chars[G].terms}#aQ(){if(this.#ak&&this.#an){this.updateScale();var R=this.#aa.songTempo;this.#an.setBPM(R);var F=this.#aa.songKey;this.#an.setKey(F)}}updateScale(){"edit"==this.#W.value&&this.#ak?this.#aa={songTempo:parseInt(this.#ay.value),songKey:parseInt(this.#az.value),songVolume:parseInt(this.#aA.value)}:"edit"==this.#W.value?this.#aa={speedScale:parseFloat(this.#ac.value),pitchScale:parseFloat(this.#ad.value),intonationScale:parseFloat(this.#ae.value)}:"ask-ai"==this.#W.value&&this.#ak?this.#aa={songTempo:120,songKey:0,songVolume:0}:"ask-ai"==this.#W.value?this.#aa={speedScale:1,pitchScale:0,intonationScale:1}:this.#aa=JSON.parse(this.#W.value)}updateText(){this.#G=this.#Z.value}setText(e){this.#G=e}getText(){return this.#G}updateAccentPhrases(){this.#Q=this.#G,Voicevox.update({accentPhrases:{id:this.id,speaker:this.#P,text:this.#G}})}async setAccentPhrases(e){var t=await fetch(e);if(400==t.status){this.#_.innerHTML=`合成エラー：<a target=”_blank” href=${e}>詳細</a>`,this.#aN(),this.#Q="";return}var i=await t.json();if(Voicevox.isFixedPauseMora){console.log(i);for(var a=0;a<i.length;a++)i[a].pause_mora&&(i[a].pause_mora.vowel_length=Voicevox.#aB);console.log(i)}this.#n=i,this.#R.setAccentPhrases(this.#n),this.updateAudioWav()}static setFixedPauseMora(e){var t=Voicevox.#aX(e,.01);t<=0&&(t=.01),t>10&&(t=10),Voicevox.#aB=t}getAccentPhrases(e){return this.#n}updateAudioWav(){Voicevox.update({audioWav:{id:this.id,speaker:this.#P,accentPhrases:this.#n,scale:this.#aa}})}#aT(){var Y=this.#aa.songTempo,W=this.#aa.songVolume;Voicevox.update({song:{id:this.id,speaker:this.#P,voices:this.#an.getVoices(),bpm:Y,volume:W}})}async setAudioWav(e){if(this.src=e,400==(await fetch(e)).status){this.#_.innerHTML=`合成エラー：<a target=”_blank” href="${e}">詳細</a>`,this.#ap.innerHTML=`合成エラー：<a target=”_blank” href="${e}">詳細</a>`,this.#aN();return}Voicevox.isAnyAudioAvailable=!0,this.#_.innerHTML=` <a target=”_blank” href="${e}" >ダウンロード</a>`,this.#ap.innerHTML=` <a target=”_blank” href="${e}" >ダウンロード</a>`}getAudioWav(e){return this.src}static #aC(U){return btoa(String.fromCharCode(...crypto.getRandomValues(new Uint8Array(U)))).substring(0,U)}#aI(){this.#W.updateOptions(),dialog.close(),dialog.payload.innerHTML=`
<h3>話者を並び替え</h3>
<p>入力中のデータと音声は破棄されます。<br>
本当に並び替えますか？</p>
        `;var K=document.createElement("center"),q=document.createElement("button");q.innerHTML="話者を並び替える",q.addEventListener("click",e=>{this.#aY(),dialog.close()}),K.appendChild(q),dialog.payload.appendChild(K),dialog.showModal()}#aY(){this.#k.innerHTML="";let J=localStorage.getItem("speaker_uuid_list"),Z=()=>{let e=localStorage.getItem("speaker_uuid_list");return J==e||(dialog.close(),dialog.payload.innerHTML=`
<h3>コンフリクト</h3>
すでに編集されているため、<br>
更新できませんでした。
                `,dialog.showModal(),this.#j(),!1)},Q=e=>{for(var t=!1,i=0;i<e.length;i++)t=t||e[i].enabled;return!!t||(dialog.close(),dialog.payload.innerHTML=`
<h3>更新エラー</h3>
すべてを非表示にすることはできません。
                `,dialog.showModal(),!1)};for(var ee=JSON.parse(J),et=0;et<ee.length;et++){let ei=et;var ea=document.createElement("p"),es=document.createElement("span"),en=document.createElement("button");en.innerHTML="上昇",en.addEventListener("click",e=>{Z()&&([ee[ei],ee[ei-1]]=[ee[ei-1],ee[ei]],localStorage.setItem("speaker_uuid_list",JSON.stringify(ee)),this.#aY())}),0==ei&&(en.disabled=!0);var er=document.createElement("button");ee[ei].enabled?(er.innerHTML="非表示",er.setAttribute("style","text-align: center;width:4em;"),er.addEventListener("click",e=>{if(Z()){if(ee[ei].enabled=!1,!Q(ee)){ee[ei].enabled=!0;return}localStorage.setItem("speaker_uuid_list",JSON.stringify(ee)),this.#aY()}})):(es.setAttribute("style","color:#606060;"),er.innerHTML="表示",er.setAttribute("style","text-align: center;width:4em;"),er.addEventListener("click",e=>{Z()&&(ee[ei].enabled=!0,localStorage.setItem("speaker_uuid_list",JSON.stringify(ee)),this.#aY())}));let ed=this.#aF(ee[ei].uuid);if(es.innerHTML=" "+ed+" ",ei%5==0){var eo=document.createElement("div");eo.setAttribute("align","right");var ec=document.createElement("button");ec.innerHTML="反映",ec.addEventListener("click",e=>{this.#j()}),eo.appendChild(ec),ea.appendChild(eo)}ea.appendChild(en),ea.appendChild(er),ea.appendChild(es),this.#k.appendChild(ea)}}#aH(){this.#ab.innerHTML="";var eh=Voicevox.#aC(16),eu=`
<h3>プリセット区分</h3>
<h4>VOICEVOX</h4>
<p>すべての VOICEVOX キャラクター・スタイルに適用されるプリセットです。</p>
すべてに適用されます。<br>
例）VOICEVOX:ずんだもん（ノーマル）で保存した場合、<br>
・VOICEVOX:ずんだもん（ノーマル）に適用されます。<br>
・VOICEVOX:ずんだもん（あまあま）に適用されます。<br>
・VOICEVOX:四国めたん（ささやき）に適用されます。<br>
・VOICEVOX:春日部つむぎ（ノーマル）に適用されます。
<h4>キャラクター</h4>
<p>キャラクターにのみ適用されるプリセットです。</p>
別のキャラクターには適用されません。<br>
例）VOICEVOX:ずんだもん（ノーマル）で保存した場合、<br>
・VOICEVOX:ずんだもん（ノーマル）に適用されます。<br>
・VOICEVOX:ずんだもん（あまあま）に適用されます。<br>
・VOICEVOX:四国めたん（ささやき）には適用されません。<br>
・VOICEVOX:春日部つむぎ（ノーマル）には適用されません。
<h4>スタイル</h4>
<p>キャラクターのスタイルにのみ適用されるプリセットです。</p>
別のスタイルや、別のキャラクターには適用されません。<br>
例）VOICEVOX:ずんだもん（ノーマル）で保存した場合、<br>
・VOICEVOX:ずんだもん（ノーマル）に適用されます。<br>
・VOICEVOX:ずんだもん（あまあま）には適用されません。<br>
・VOICEVOX:四国めたん（ささやき）には適用されません。<br>
・VOICEVOX:春日部つむぎ（ノーマル）には適用されません。
        `,el=Voicevox.#aZ("div","プリセット区分",eu),e$=this.#a$(eh,"voicevox","VOICEVOX");this.#ag=this.#a$(eh,"character","キャラクター"),this.#ah=this.#a$(eh,"style","スタイル"),this.#ah.radio.setAttribute("checked",!0);var ep=Voicevox.#aZ("div","プリセット名","<h3>プリセット名</h3>プリセットの表示名。<br>重複可。省略可。");this.#af=document.createElement("input");var e1=document.createElement("button");e1.addEventListener("click",e=>{this.updateScale();var t=this.#aa;t.name=Voicevox.#aR(this.#af.value);var i="preset";this.#ag.radio.checked&&(i="character_preset_"+this.#U.value),this.#ah.radio.checked&&(i="style_preset_"+this.#V.value),i=this.#ak?"voicevox_song_"+i:"voicevox_talk_"+i;var a=[];localStorage.getItem(i)&&(a=JSON.parse(localStorage.getItem(i))),a=JSON.stringify([t,...a]),localStorage.setItem(i,a),this.#W.updateOptions(),this.#aJ()}),e1.innerHTML="保存";var eb=document.createElement("div");if(this.#ak){var em=Voicevox.#aZ("div","テンポ","<h3>テンポ</h3>曲のBPMを指定できます。<br>キャラクタースタイルによる差異はありません。");this.#ay=this.#a_(60,240,1,120);var ev=Voicevox.#aZ("div","移調","<h3>移調</h3>曲のキーを設定し、移調させることができます。<br>キャラクタースタイルによって、得意とする音域が異なります。");this.#az=this.#a_(-24,24,1,0);var eg=Voicevox.#aZ("div","音量調整","<h3>音量調整</h3>キャラクタースタイルによって、値を調整する必要があります。<br>声がかすれる場合、値を大きくしてみてください。");this.#aA=this.#a_(-20,20,1,0),eb.appendChild(em),eb.appendChild(this.#ay),eb.appendChild(ev),eb.appendChild(this.#az),eb.appendChild(eg),eb.appendChild(this.#aA)}else{var ef=Voicevox.#aZ("div","話速","<h3>話速</h3>speedScale");this.#ac=this.#a_(.5,2,.01,1);var ey=document.createElement("div");ey.appendChild(this.#ac);var ex=Voicevox.#aC(16),e_=document.createElement("div");e_.setAttribute("style","margin: 0.1em;");var e2=document.createElement("label");e2.setAttribute("for",ex);var eO=document.createElement("input");eO.id=ex,eO.setAttribute("type","checkbox"),eO.addEventListener("change",e=>{if(e.srcElement.checked){var t=this.#ac.value;t=Math.round(120*t),this.#ac=this.#a_(60,240,1,t)}else{var t=this.#ac.value;t=Math.round(100*t/120)/100,this.#ac=this.#a_(.5,2,.01,t)}ey.innerHTML="",ey.appendChild(this.#ac)});var eE=document.createElement("span");eE.innerHTML="BPM",e_.appendChild(e2),e2.appendChild(eO),e2.appendChild(eE);var eS=Voicevox.#aZ("div","音高","<h3>音高</h3>pitchScale");this.#ad=this.#a_(-.15,.15,.01,0);var ek=Voicevox.#aZ("div","抑揚","<h3>抑揚</h3>intonationScale");this.#ae=this.#a_(0,2,.01,1),eb.appendChild(ef),eb.appendChild(e_),eb.appendChild(ey),eb.appendChild(eS),eb.appendChild(this.#ad),eb.appendChild(ek),eb.appendChild(this.#ae)}this.#ab.appendChild(el),this.#ab.appendChild(e$),this.#ab.appendChild(this.#ag),this.#ab.appendChild(this.#ah),this.#ab.appendChild(ep),this.#ab.appendChild(this.#af),this.#ab.appendChild(e1),this.#ab.appendChild(eb)}#aJ(){this.#ab.innerHTML=""}#a$(eV,eA,e3){var e4=document.createElement("span");e4.setAttribute("style","white-space: nowrap;");var e6=document.createElement("input");e6.id=Voicevox.#aC(16),e6.setAttribute("type","radio"),e6.setAttribute("name",eV),e6.setAttribute("value",eA);var e0=document.createElement("label");e0.setAttribute("for",e6.id);var eC=document.createElement("span");return eC.innerHTML=e3,e0.appendChild(e6),e0.appendChild(eC),e4.appendChild(e0),e4.radio=e6,e4}#a_(e5,ej,e7,ew){var eT=document.createElement("div");return eT.value=ew,eT.number=document.createElement("input"),eT.number.setAttribute("type","number"),eT.number.setAttribute("min",e5),eT.number.setAttribute("max",ej),eT.number.setAttribute("step",e7),eT.number.setAttribute("value",ew),eT.number.setAttribute("style","width:10%"),eT.number.addEventListener("change",e=>{eT.number.value=Voicevox.#aX(eT.number.value,ew),eT.number.value<e5&&(eT.number.value=e5),eT.number.value>ej&&(eT.number.value=ej),eT.value=eT.range.value=eT.number.value}),eT.range=document.createElement("input"),eT.range.setAttribute("type","range"),eT.range.setAttribute("min",e5),eT.range.setAttribute("max",ej),eT.range.setAttribute("step",e7),eT.range.setAttribute("value",ew),eT.range.setAttribute("style","width:80%"),eT.range.addEventListener("change",e=>{eT.range.value<e5&&(eT.range.value=e5),eT.range.value>ej&&(eT.range.value=ej),eT.value=eT.number.value=eT.range.value}),eT.appendChild(eT.number),eT.appendChild(eT.range),eT}static #aZ(eM,e8,eI){var eL=document.createElement(eM),eP=document.createElement("span");eP.innerHTML=e8;var eH=document.createElement("span");return eH.innerHTML="【詳細】",eH.setAttribute("style","color:#38488f;cursor:pointer;"),eH.addEventListener("click",e=>{dialog.close(),dialog.payload.innerHTML=eI,dialog.showModal()}),eL.appendChild(eP),eL.appendChild(eH),eL}static #aR(eN){var eD=document.createTextNode(eN),eX=document.createElement("p");return eX.appendChild(eD),eX.innerHTML}static genSettings(){var e=`
<h3>設定</h3>
<h4>プリセットの並び替え・削除</h4>
<!-- 直したら復活させる
<p><a href="/preset" target="_blank" rel="opener">VOICEVOXプリセットの並び替え・削除</a></p>
-->
<span>現在、並び替え機能が無効化されています。<br>データ削除ですべてのプリセットを消去することが可能です。</span>
<h4>スクロールを抑制</h4>
<h5>発音編集画面の上下スクロール禁止</h5>
<span style="white-space: nowrap;"><label for="isSVGScrollSuppressedTrue"><input id="isSVGScrollSuppressedTrue" type="radio" name="isSVGScrollSuppressed" onclick="DraggableSVG.isScrollSuppressed=true"><span>有効</span></label></span>
<span style="white-space: nowrap;"><label for="isSVGScrollSuppressedFalse"><input id="isSVGScrollSuppressedFalse" type="radio" name="isSVGScrollSuppressed" onclick="DraggableSVG.isScrollSuppressed=false"><span>無効</span></label></span>
<h4>句点の長さをを固定する</h4>
<span style="white-space: nowrap;"><label for="isFixedPauseMoraTrue"><input id="isFixedPauseMoraTrue" type="radio" name="isFixedPauseMora" onclick="Voicevox.isFixedPauseMora=true"><span>有効</span></label></span>
<span style="white-space: nowrap;"><label for="isFixedPauseMoraFalse"><input id="isFixedPauseMoraFalse" type="radio" name="isFixedPauseMora" onclick="Voicevox.isFixedPauseMora=false"><span>無効</span></label></span>
<p>
<input type="number" min="0" max="10" id="fixedPauseMora" onchange="Voicevox.setFixedPauseMora(this.value)"/> 秒 (+α)
</p>
<h4>データ削除</h4>
<p>プリセットなど、デバイスに保存されたすべてのデータを削除します。</p>
<center>
<button onclick="localStorage.clear();dialog.close();document.body.innerHTML='';">削除</button>
</center>
<p></p>
        `,t=()=>{if(Voicevox.isFixedPauseMora){var e=document.getElementById("isFixedPauseMoraTrue");e&&(e.checked=!0)}else{var e=document.getElementById("isFixedPauseMoraFalse");e&&(e.checked=!0)}if(DraggableSVG.isSVGScrollSuppressed){var e=document.getElementById("isSVGScrollSuppressedTrue");e&&(e.checked=!0)}else{var e=document.getElementById("isSVGScrollSuppressedFalse");e&&(e.checked=!0)}var t=document.getElementById("fixedPauseMora");t&&(t.value=Voicevox.#aB)},i=document.createElement("span");return i.innerHTML="【設定】",i.setAttribute("style","color:#38488f;cursor:pointer;"),i.addEventListener("click",i=>{dialog.close(),dialog.payload.innerHTML=e,t(),dialog.showModal()}),i}setAbcStr(e){this.#aQ(),this.#ao.removeAttribute("disabled"),this.#an.makeScoreFromText(e)}#a0(){return Math.floor(new Date().getTime()/1e3)}#aM(eB){return Voicevox.chars[eB].styles}#aE(){let ez=Object.keys(Voicevox.chars);var eG=[],eR=localStorage.getItem("speaker_uuid_list");if((eR=eR?JSON.parse(eR):[])&&eR.length==ez.length);else{for(var eF=new Set,eY=0;eY<eR.length;eY++)eF.add(eR[eY].uuid);for(var eY=0;eY<ez.length;eY++)eF.has(ez[eY])||eR.push({uuid:ez[eY],enabled:!0});localStorage.setItem("speaker_uuid_list",JSON.stringify(eR))}for(var eY=0;eY<eR.length;eY++)eR[eY].enabled&&eG.push(eR[eY].uuid);if(this.#aj){for(var e9=[],eY=0;eY<eG.length;eY++){var eW=eG[eY];Voicevox.chars[eW].isNemo&&e9.push(eW)}eG=e9}if(this.#aq){for(var e9=[],eY=0;eY<eG.length;eY++){var eW=eG[eY];Voicevox.chars[eW].isSinger&&e9.push(eW)}eG=e9}return eG}static zip_mp3(e,t){Voicevox.update({zip_mp3:{id:e.id,contents:t}})}static zipMp3Options(e){var t=document.createElement("div");t.id=Voicevox.#aC(16),t.filenameCount=0;var i=document.createElement("h2");i.innerHTML="ダウンロード（MP3）",t.start=document.createElement("button"),t.start.innerHTML="作成",t.start.addEventListener("click",e=>{if(!Voicevox.isAnyAudioAvailable){dialog.close(),dialog.payload.innerHTML=`
                    <h3>音声がありません</h3>
                    <p>音声が一つも合成されていません。</p>
                    <p>まずは「合成」ボタンを押して、
                    <br>音声を作成してください。</p>
                `,dialog.showModal();return}t.filenameStr=t.filename.value,t.filenameCount++,Voicevox.zip_mp3(t,t.contents()),t.start.setAttribute("disabled",!0),setTimeout(()=>t.start.removeAttribute("disabled"),1e4)}),t.contents=function(){for(var e=[],t={},i=document.getElementsByName("VOICEVOX"),a=0;a<i.length;a++){var s=i[a].getText(),n=""+(a+1),r=""+a,d=i[a].getSpeaker(),o=i[a].getSpeakerName().replaceAll("VOICEVOX:",""),c="/i".replaceAll("/i",n).replaceAll("/I",r).replaceAll("/s",d).replaceAll("/S",o).replaceAll("/T",s);t[c]?(t[c]++,c=c+" ("+t[c]+")"):t[c]=1,e.push({name:c,text:s,id:i[a].id})}return e};var a=document.createElement("center");a.appendChild(t.start);var s=Voicevox.#aZ("h3","ファイル名",`
<h3>ファイル名</h3>
ダウンロードするmp3ファイルのファイル名。<br>
「.mp3」は自動で付与される。
            `);t.filename=document.createElement("input"),t.filename.style.width="70%",t.filename.style.fontSize="1.3em";var n=document.createElement("span");n.innerHTML=" .mp3";var r=document.createElement("span");r.appendChild(t.filename),r.appendChild(n),t.zips=document.createElement("div"),t.appendZipUrl=e=>{e=e+"/"+encodeURI(t.filenameStr).replaceAll("/","%2F")+".mp3";var i=document.createElement("span");i.innerHTML=""+t.filenameCount+": ";var a=document.createElement("a");a.href=e,a.innerHTML=Voicevox.#aR(t.filenameStr)+".mp3";var s=document.createElement("p");s.appendChild(i),s.appendChild(a),t.zips.appendChild(s)},t.appendChild(i),t.appendChild(s),t.appendChild(r),t.appendChild(document.createElement("p")),t.appendChild(a),t.appendChild(document.createElement("p")),t.appendChild(t.zips),e.appendChild(t)}static zip(e,t,i){Voicevox.update({zip:{id:e.id,code:t,contents:i}})}static zipOptions(e){var t=document.createElement("div");t.id=Voicevox.#aC(16),t.filenameCount=0;var i=document.createElement("h2");i.innerHTML="ダウンロード（ZIP）",t.start=document.createElement("button"),t.start.innerHTML="作成",t.start.addEventListener("click",e=>{if(!Voicevox.isAnyAudioAvailable){dialog.close(),dialog.payload.innerHTML=`
                    <h3>音声がありません</h3>
                    <p>音声が一つも合成されていません。</p>
                    <p>まずは「合成」ボタンを押して、
                    <br>音声を作成してください。</p>
                `,dialog.showModal();return}t.filenameStr=t.filename.value,t.filenameCount++,Voicevox.zip(t,t.code.value,t.contents()),t.start.setAttribute("disabled",!0),setTimeout(()=>t.start.removeAttribute("disabled"),1e4)}),t.contents=function(){for(var e=[],i={},a=t.template.value,s=document.getElementsByName("VOICEVOX"),n=0;n<s.length;n++){var r=s[n].getText(),d=""+(n+1),o=""+n,c=s[n].getSpeaker(),h=s[n].getSpeakerName().replaceAll("VOICEVOX:",""),u=a.replaceAll("/i",d).replaceAll("/I",o).replaceAll("/s",c).replaceAll("/S",h).replaceAll("/T",r);i[u]?(i[u]++,u=u+" ("+i[u]+")"):i[u]=1,e.push({name:u,text:r,id:s[n].id})}return e};var a=document.createElement("center");a.appendChild(t.start);var s=Voicevox.#aZ("h3","文字コード","<h3>文字コード</h3>本文をテキストファイルとして保存する際の、<br>本文の文字コードを選択してください。<br>ファイル名はUTF-8になります。<br>環境によっては、ダウンロード時や解凍時に<br>ファイル名の文字コードが変換されることがあります。<h4>UTF-8</h4>Unicodeの標準的な文字コード。<br>BOMはつかない。<h4>Shift-JIS</h4>厳密にはCP932。<br>Windows-31Jや、MS932と呼ばれることもある。<br>日本語版WindowsにおけるANSI。");t.code=document.createElement("select");var n=document.createElement("option");n.value="UTF-8",n.innerHTML="UTF-8";var r=document.createElement("option");r.value="CP932",r.innerHTML="Shift_JIS",t.code.appendChild(n),t.code.appendChild(r);var d=Voicevox.#aZ("h3","命名規則",`
<h3>命名規則</h3>
音声ファイルとテキストファイルに付けるファイル名。<br>
ファイルの種類に応じて、「.wav」や「.txt」が付与される。
<h4>{連番}</h4>
1から始まる連番の数字。
<h4>{話者ID}</h4>
0から始まる話者ID。
<table>
            `);t.template=document.createElement("select");var o=document.createElement("option");o.value="/i",o.innerHTML="{連番}";var c=document.createElement("option");c.value="/s_/i",c.innerHTML="{話者ID}_{連番}";var h=document.createElement("option");h.value="/i_/s",h.innerHTML="{連番}_{話者ID}",t.template.appendChild(o),t.template.appendChild(h),t.template.appendChild(c);var u=Voicevox.#aZ("h3","ファイル名",`
<h3>ファイル名</h3>
ダウンロードするzipファイルのファイル名。<br>
「.zip」は自動で付与される。
            `);t.filename=document.createElement("input"),t.filename.style.width="70%",t.filename.style.fontSize="1.3em";var l=document.createElement("span");l.innerHTML=" .zip";var $=document.createElement("span");$.appendChild(t.filename),$.appendChild(l),t.zips=document.createElement("div"),t.appendZipUrl=e=>{e=e+"/"+encodeURI(t.filenameStr).replaceAll("/","%2F")+".zip";var i=document.createElement("span");i.innerHTML=""+t.filenameCount+": ";var a=document.createElement("a");a.href=e,a.innerHTML=Voicevox.#aR(t.filenameStr)+".zip";var s=document.createElement("p");s.appendChild(i),s.appendChild(a),t.zips.appendChild(s)},t.appendChild(i),t.appendChild(s),t.appendChild(t.code),t.appendChild(d),t.appendChild(t.template),t.appendChild(u),t.appendChild($),t.appendChild(document.createElement("p")),t.appendChild(a),t.appendChild(document.createElement("p")),t.appendChild(t.zips),e.appendChild(t)}#a1(eU,eK,eq){if(0===eK.length){dialog.close(),dialog.payload.innerHTML=`
<h3>プロンプトを入力してください</h3>
プロンプトが入力されていません。<br>
どんな文章、楽譜を生成したいですか？<br>
プロンプト（AIへの指示）を入力してください。
            `,dialog.showModal(),eq({status:"invalid_length"});return}if(eK.length>300){dialog.close(),dialog.payload.innerHTML=`
<h3>プロンプトが長すぎます</h3>
${eK.length}文字のプロンプトが入力されました。<br>
長すぎるので、300文字程度に収めてください。
            `,dialog.showModal(),eq({status:"invalid_length"});return}var eJ=document.createElement("span");eJ.id=Voicevox.#aC(16),eJ.done=!1,eJ.setAnswer=async e=>{if(!eJ.done){if(eJ.done=!0,e){var t=await (await fetch(e)).json();t.status="done",t.url=e,eq(t);return}eq({status:"timeout",url:e})}},this.#as.appendChild(eJ),Voicevox.update({ask:{id:eJ.id,system:eU,user:eK}}),setTimeout(()=>eJ.setAnswer(),3e4)}#aK(){this.#au.hidden=!1}#aL(){this.#au.hidden=!0}#aD(){var eZ=this.#av.value;if(this.#aw.disabled=!0,this.#ax.innerHTML=" 生成中...",this.#ak){var eQ="tts.quest/abc";this.#a1(eQ,eZ,e=>{"done"==e.status&&e.success?(this.#an.setText(e.text),this.#ax.innerHTML=""):"done"!=e.status||e.success?"timeout"==e.status?this.#ax.innerHTML=` 生成失敗。タイムアウト`:"invalid_length"==e.status&&(this.#ax.innerHTML=` 生成失敗: 不正な文字数`):this.#ax.innerHTML=` 生成失敗。<a target="_blank" href="${e.url}">詳細</a>`,console.log(e.text),this.#aw.removeAttribute("disabled")})}else{var eQ="アシスタントの回答は、日本語として形態素解析可能である必要があります。必ず日本語の常用漢字、ひらがな、カタカナのみで回答してください。";this.#U.value==this.#at&&(eQ="tts.quest/nanoda::"+eQ),this.#a1(eQ,eZ,e=>{"done"==e.status&&e.success?(this.#Z.value=e.text,this.#ax.innerHTML=""):"done"!=e.status||e.success?"timeout"==e.status?this.#ax.innerHTML=` 生成失敗: タイムアウト`:"invalid_length"==e.status&&(this.#ax.innerHTML=` 生成失敗: 不正な文字数`):this.#ax.innerHTML=` 生成失敗: <a target="_blank" href="${e.url}">詳細</a>`,console.log(e.text),this.#aw.removeAttribute("disabled")})}}static #aX(te,tt){if(""===te)return tt;var ti=Number(te);return isNaN(ti)?tt:ti}setSpeakerStyleText(e){this.#U.value=e.speaker,this.#V.updateOptions(e.speaker),this.#V.value=e.style,this.#W.updateOptions(),this.#Z.value=e.text}getSpeakerStyleText(){return{speaker:this.#U.value,style:this.#V.value,text:this.#Z.value}}static isScrollSuppressed=!1;static ScrollSuppressionMilSec=10;static ScrollSuppressionPx=100;static #a2=0;static #a3=0;static #a4=0;static #a5=0;static #a6=0;static async ScrollSuppression(){var e=e=>new Promise(t=>setTimeout(t,e)),t=async()=>{let t=Voicevox.#a2,i=Voicevox.#a3;for(var a=0;a<100;a++)window.scrollTo(t,i),await e(Voicevox.ScrollSuppressionMilSec);window.scrollTo(t,i)};if(Voicevox.isScrollSuppressed){var i=Voicevox.#a5,a=Voicevox.#a6;await e(Voicevox.ScrollSuppressionMilSec);let s=window.scrollX,n=window.scrollY;Math.abs(i-s)>Voicevox.ScrollSuppressionPx?t():Math.abs(a-n)>Voicevox.ScrollSuppressionPx&&t(),Voicevox.#a2==s&&Voicevox.#a3==n&&(Voicevox.#a4=0),i==s&&n==n?(Voicevox.#a4++,100==Voicevox.#a4&&(Voicevox.#a2=s,Voicevox.#a3=n)):Voicevox.#a4=0,Voicevox.#a5=s,Voicevox.#a6=n}else await e(1e3);Voicevox.ScrollSuppression()}}Voicevox.ScrollSuppression(),Voicevox.chars={"388f246b-8c41-4ac1-8e2d-5d79f3ff56d9":{prefix:"VOICEVOX:",isNemo:!1,name:"ずんだもん",styles:[{name:"ノーマル",id:3,type:"talk"},{name:"あまあま",id:1,type:"talk"},{name:"ツンツン",id:7,type:"talk"},{name:"セクシー",id:5,type:"talk"},{name:"ささやき",id:22,type:"talk"},{name:"ヒソヒソ",id:38,type:"talk"},{name:"ヘロヘロ",id:75,type:"talk"},{name:"なみだめ",id:76,type:"talk"},{name:"ノーマル",id:3003,type:"frame_decode"},{name:"あまあま",id:3001,type:"frame_decode"},{name:"ツンツン",id:3007,type:"frame_decode"},{name:"セクシー",id:3005,type:"frame_decode"},{name:"ヒソヒソ",id:3038,type:"frame_decode"},{name:"ヘロヘロ",id:3075,type:"frame_decode"},{name:"なみだめ",id:3076,type:"frame_decode"}],terms:"<p>ずんだもん は ＳＳＳ合同会社 の登録商標または商標です。</p>",isSinger:!0},"7ffcb7ce-00ec-4bdc-82cd-45a8889e43ff":{prefix:"VOICEVOX:",isNemo:!1,name:"四国めたん",styles:[{name:"ノーマル",id:2,type:"talk"},{name:"あまあま",id:0,type:"talk"},{name:"ツンツン",id:6,type:"talk"},{name:"セクシー",id:4,type:"talk"},{name:"ささやき",id:36,type:"talk"},{name:"ヒソヒソ",id:37,type:"talk"},{name:"ノーマル",id:3002,type:"frame_decode"},{name:"あまあま",id:3e3,type:"frame_decode"},{name:"ツンツン",id:3006,type:"frame_decode"},{name:"セクシー",id:3004,type:"frame_decode"},{name:"ヒソヒソ",id:3037,type:"frame_decode"}],terms:"",isSinger:!0},"35b2c544-660e-401e-b503-0e14c635303a":{prefix:"VOICEVOX:",isNemo:!1,name:"春日部つむぎ",styles:[{name:"ノーマル",id:8,type:"talk"},{name:"ノーマル",id:3008,type:"frame_decode"}],terms:"",isSinger:!0},"3474ee95-c274-47f9-aa1a-8322163d96f1":{prefix:"VOICEVOX:",isNemo:!1,name:"雨晴はう",styles:[{name:"ノーマル",id:10,type:"talk"},{name:"ノーマル",id:3010,type:"frame_decode"}],terms:"",isSinger:!0},"b1a81618-b27b-40d2-b0ea-27a9ad408c4b":{prefix:"VOICEVOX:",isNemo:!1,name:"波音リツ",styles:[{name:"ノーマル",id:9,type:"talk"},{name:"クイーン",id:65,type:"talk"},{name:"ノーマル",id:3009,type:"frame_decode"},{name:"クイーン",id:3065,type:"frame_decode"},{name:"ノーマル",id:6e3,type:"sing"}],terms:"",isSinger:!0},"c30dc15a-0992-4f8d-8bb8-ad3b314e6a6f":{prefix:"VOICEVOX:",isNemo:!1,name:"玄野武宏",styles:[{name:"ノーマル",id:11,type:"talk"},{name:"喜び",id:39,type:"talk"},{name:"ツンギレ",id:40,type:"talk"},{name:"悲しみ",id:41,type:"talk"},{name:"ノーマル",id:3011,type:"frame_decode"},{name:"喜び",id:3039,type:"frame_decode"},{name:"ツンギレ",id:3040,type:"frame_decode"},{name:"悲しみ",id:3041,type:"frame_decode"}],terms:"",isSinger:!0},"e5020595-5c5d-4e87-b849-270a518d0dcf":{prefix:"VOICEVOX:",isNemo:!1,name:"白上虎太郎",styles:[{name:"ふつう",id:12,type:"talk"},{name:"わーい",id:32,type:"talk"},{name:"びくびく",id:33,type:"talk"},{name:"おこ",id:34,type:"talk"},{name:"びえーん",id:35,type:"talk"},{name:"ふつう",id:3012,type:"frame_decode"},{name:"わーい",id:3032,type:"frame_decode"},{name:"びくびく",id:3033,type:"frame_decode"},{name:"おこ",id:3034,type:"frame_decode"},{name:"びえーん",id:3035,type:"frame_decode"}],terms:"",isSinger:!0},"4f51116a-d9ee-4516-925d-21f183e2afad":{prefix:"VOICEVOX:",isNemo:!1,name:"青山龍星",styles:[{name:"ノーマル",id:13,type:"talk"},{name:"熱血",id:81,type:"talk"},{name:"不機嫌",id:82,type:"talk"},{name:"喜び",id:83,type:"talk"},{name:"しっとり",id:84,type:"talk"},{name:"かなしみ",id:85,type:"talk"},{name:"囁き",id:86,type:"talk"},{name:"ノーマル",id:3013,type:"frame_decode"},{name:"熱血",id:3081,type:"frame_decode"},{name:"不機嫌",id:3082,type:"frame_decode"},{name:"喜び",id:3083,type:"frame_decode"},{name:"しっとり",id:3084,type:"frame_decode"},{name:"かなしみ",id:3085,type:"frame_decode"}],terms:'<a href="https://virvoxproject.wixsite.com/official/voicevox%E3%81%AE%E5%88%A9%E7%94%A8%E8%A6%8F%E7%B4%84">利用許諾</a>',isSinger:!0},"8eaad775-3119-417e-8cf4-2a10bfd592c8":{prefix:"VOICEVOX:",isNemo:!1,name:"冥鳴ひまり",styles:[{name:"ノーマル",id:14,type:"talk"},{name:"ノーマル",id:3014,type:"frame_decode"}],terms:"",isSinger:!0},"481fb609-6446-4870-9f46-90c4dd623403":{prefix:"VOICEVOX:",isNemo:!1,name:"九州そら",styles:[{name:"ノーマル",id:16,type:"talk"},{name:"あまあま",id:15,type:"talk"},{name:"ツンツン",id:18,type:"talk"},{name:"セクシー",id:17,type:"talk"},{name:"ささやき",id:19,type:"talk"},{name:"ノーマル",id:3016,type:"frame_decode"},{name:"あまあま",id:3015,type:"frame_decode"},{name:"ツンツン",id:3018,type:"frame_decode"},{name:"セクシー",id:3017,type:"frame_decode"}],terms:"",isSinger:!0},"9f3ee141-26ad-437e-97bd-d22298d02ad2":{prefix:"VOICEVOX:",isNemo:!1,name:"もち子(cv 明日葉よもぎ)",styles:[{name:"ノーマル",id:20,type:"talk"},{name:"セクシー／あん子",id:66,type:"talk"},{name:"泣き",id:77,type:"talk"},{name:"怒り",id:78,type:"talk"},{name:"喜び",id:79,type:"talk"},{name:"のんびり",id:80,type:"talk"},{name:"ノーマル",id:3020,type:"frame_decode"},{name:"セクシー／あん子",id:3066,type:"frame_decode"},{name:"泣き",id:3077,type:"frame_decode"},{name:"怒り",id:3078,type:"frame_decode"},{name:"喜び",id:3079,type:"frame_decode"},{name:"のんびり",id:3080,type:"frame_decode"}],terms:'<a href="https://vtubermochio.wixsite.com/mochizora/%E5%88%A9%E7%94%A8%E8%A6%8F%E7%B4%84">利用規約と禁止事項</a>',isSinger:!0},"1a17ca16-7ee5-4ea5-b191-2f02ace24d21":{prefix:"VOICEVOX:",isNemo:!1,name:"剣崎雌雄",styles:[{name:"ノーマル",id:21,type:"talk"},{name:"ノーマル",id:3021,type:"frame_decode"}],terms:"",isSinger:!0},"67d5d8da-acd7-4207-bb10-b5542d3a663b":{prefix:"VOICEVOX:",isNemo:!1,name:"WhiteCUL",styles:[{name:"ノーマル",id:23,type:"talk"},{name:"たのしい",id:24,type:"talk"},{name:"かなしい",id:25,type:"talk"},{name:"びえーん",id:26,type:"talk"},{name:"ノーマル",id:3023,type:"frame_decode"},{name:"たのしい",id:3024,type:"frame_decode"},{name:"かなしい",id:3025,type:"frame_decode"},{name:"びえーん",id:3026,type:"frame_decode"}],terms:"",isSinger:!0},"0f56c2f2-644c-49c9-8989-94e11f7129d0":{prefix:"VOICEVOX:",isNemo:!1,name:"後鬼",styles:[{name:"人間ver.",id:27,type:"talk"},{name:"ぬいぐるみver.",id:28,type:"talk"},{name:"人間（怒り）ver.",id:87,type:"talk"},{name:"鬼ver.",id:88,type:"talk"},{name:"人間ver.",id:3027,type:"frame_decode"},{name:"ぬいぐるみver.",id:3028,type:"frame_decode"}],terms:"",isSinger:!0},"044830d2-f23b-44d6-ac0d-b5d733caa900":{prefix:"VOICEVOX:",isNemo:!1,name:"No.7",styles:[{name:"ノーマル",id:29,type:"talk"},{name:"アナウンス",id:30,type:"talk"},{name:"読み聞かせ",id:31,type:"talk"},{name:"ノーマル",id:3029,type:"frame_decode"},{name:"アナウンス",id:3030,type:"frame_decode"},{name:"読み聞かせ",id:3031,type:"frame_decode"}],terms:"",isSinger:!0},"468b8e94-9da4-4f7a-8715-a22a48844f9e":{prefix:"VOICEVOX:",isNemo:!1,name:"ちび式じい",styles:[{name:"ノーマル",id:42,type:"talk"},{name:"ノーマル",id:3042,type:"frame_decode"}],terms:"",isSinger:!0},"0693554c-338e-4790-8982-b9c6d476dc69":{prefix:"VOICEVOX:",isNemo:!1,name:"櫻歌ミコ",styles:[{name:"ノーマル",id:43,type:"talk"},{name:"第二形態",id:44,type:"talk"},{name:"ロリ",id:45,type:"talk"},{name:"ノーマル",id:3043,type:"frame_decode"},{name:"第二形態",id:3044,type:"frame_decode"},{name:"ロリ",id:3045,type:"frame_decode"}],terms:"",isSinger:!0},"a8cc6d22-aad0-4ab8-bf1e-2f843924164a":{prefix:"VOICEVOX:",isNemo:!1,name:"小夜/SAYO",styles:[{name:"ノーマル",id:46,type:"talk"},{name:"ノーマル",id:3046,type:"frame_decode"}],terms:"",isSinger:!0},"882a636f-3bac-431a-966d-c5e6bba9f949":{prefix:"VOICEVOX:",isNemo:!1,name:"ナースロボ＿タイプＴ",styles:[{name:"ノーマル",id:47,type:"talk"},{name:"楽々",id:48,type:"talk"},{name:"恐怖",id:49,type:"talk"},{name:"内緒話",id:50,type:"talk"},{name:"ノーマル",id:3047,type:"frame_decode"},{name:"楽々",id:3048,type:"frame_decode"},{name:"恐怖",id:3049,type:"frame_decode"}],terms:"",isSinger:!0},"471e39d2-fb11-4c8c-8d89-4b322d2498e0":{prefix:"VOICEVOX:",isNemo:!1,name:"†聖騎士 紅桜†",styles:[{name:"ノーマル",id:51,type:"talk"},{name:"ノーマル",id:3051,type:"frame_decode"}],terms:"",isSinger:!0},"0acebdee-a4a5-4e12-a695-e19609728e30":{prefix:"VOICEVOX:",isNemo:!1,name:"雀松朱司",styles:[{name:"ノーマル",id:52,type:"talk"},{name:"ノーマル",id:3052,type:"frame_decode"}],terms:"",isSinger:!0},"7d1e7ba7-f957-40e5-a3fc-da49f769ab65":{prefix:"VOICEVOX:",isNemo:!1,name:"麒ヶ島宗麟",styles:[{name:"ノーマル",id:53,type:"talk"},{name:"ノーマル",id:3053,type:"frame_decode"}],terms:"",isSinger:!0},"ba5d2428-f7e0-4c20-ac41-9dd56e9178b4":{prefix:"VOICEVOX:",isNemo:!1,name:"春歌ナナ",styles:[{name:"ノーマル",id:54,type:"talk"},{name:"ノーマル",id:3054,type:"frame_decode"}],terms:"",isSinger:!0},"00a5c10c-d3bd-459f-83fd-43180b521a44":{prefix:"VOICEVOX:",isNemo:!1,name:"猫使アル",styles:[{name:"ノーマル",id:55,type:"talk"},{name:"おちつき",id:56,type:"talk"},{name:"うきうき",id:57,type:"talk"},{name:"ノーマル",id:3055,type:"frame_decode"},{name:"おちつき",id:3056,type:"frame_decode"},{name:"うきうき",id:3057,type:"frame_decode"}],terms:"",isSinger:!0},"c20a2254-0349-4470-9fc8-e5c0f8cf3404":{prefix:"VOICEVOX:",isNemo:!1,name:"猫使ビィ",styles:[{name:"ノーマル",id:58,type:"talk"},{name:"おちつき",id:59,type:"talk"},{name:"人見知り",id:60,type:"talk"},{name:"ノーマル",id:3058,type:"frame_decode"},{name:"おちつき",id:3059,type:"frame_decode"}],terms:"",isSinger:!0},"1f18ffc3-47ea-4ce0-9829-0576d03a7ec8":{prefix:"VOICEVOX:",isNemo:!1,name:"中国うさぎ",styles:[{name:"ノーマル",id:61,type:"talk"},{name:"おどろき",id:62,type:"talk"},{name:"こわがり",id:63,type:"talk"},{name:"へろへろ",id:64,type:"talk"},{name:"ノーマル",id:3061,type:"frame_decode"},{name:"おどろき",id:3062,type:"frame_decode"},{name:"こわがり",id:3063,type:"frame_decode"},{name:"へろへろ",id:3064,type:"frame_decode"}],terms:"",isSinger:!0},"04dbd989-32d0-40b4-9e71-17c920f2a8a9":{prefix:"VOICEVOX:",isNemo:!1,name:"栗田まろん",styles:[{name:"ノーマル",id:67,type:"talk"},{name:"ノーマル",id:3067,type:"frame_decode"}],terms:"",isSinger:!0},"dda44ade-5f9c-4a3a-9d2c-2a976c7476d9":{prefix:"VOICEVOX:",isNemo:!1,name:"あいえるたん",styles:[{name:"ノーマル",id:68,type:"talk"},{name:"ノーマル",id:3068,type:"frame_decode"}],terms:"",isSinger:!0},"287aa49f-e56b-4530-a469-855776c84a8d":{prefix:"VOICEVOX:",isNemo:!1,name:"満別花丸",styles:[{name:"ノーマル",id:69,type:"talk"},{name:"元気",id:70,type:"talk"},{name:"ささやき",id:71,type:"talk"},{name:"ぶりっ子",id:72,type:"talk"},{name:"ボーイ",id:73,type:"talk"},{name:"ノーマル",id:3069,type:"frame_decode"},{name:"元気",id:3070,type:"frame_decode"},{name:"ささやき",id:3071,type:"frame_decode"},{name:"ぶりっ子",id:3072,type:"frame_decode"},{name:"ボーイ",id:3073,type:"frame_decode"}],terms:"",isSinger:!0},"97a4af4b-086e-4efd-b125-7ae2da85e697":{prefix:"VOICEVOX:",isNemo:!1,name:"琴詠ニア",styles:[{name:"ノーマル",id:74,type:"talk"},{name:"ノーマル",id:3074,type:"frame_decode"}],terms:"",isSinger:!0},"132ceaa1-3471-4063-b714-9e2541651286":{prefix:"VOICEVOX Nemo:",name:"混声",isNemo:!0,styles:[{name:"ノーマル",id:9999,type:"talk"}],terms:'<p><a href="/nemo#description" target="_blank">WEB版VOICEVOX限定: Nemo全9話者の混声</a></p>',isSinger:!1},"abccafa5-174f-44d8-b70c-c41eebb3061c":{prefix:"VOICEVOX Nemo:",isNemo:!0,name:"女声1",styles:[{name:"ノーマル",id:10005,type:"talk"}],terms:"",isSinger:!1},"a601bf4a-d986-468d-a394-345f4e1e7ae1":{prefix:"VOICEVOX Nemo:",isNemo:!0,name:"女声2",styles:[{name:"ノーマル",id:10007,type:"talk"}],terms:"",isSinger:!1},"be15f40d-a95a-4fb3-b298-a59fdd727af1":{prefix:"VOICEVOX Nemo:",isNemo:!0,name:"女声3",styles:[{name:"ノーマル",id:10004,type:"talk"}],terms:"",isSinger:!1},"3f98f123-fa9a-4ad0-96ba-2a1bae922433":{prefix:"VOICEVOX Nemo:",isNemo:!0,name:"女声4",styles:[{name:"ノーマル",id:10003,type:"talk"}],terms:"",isSinger:!1},"69f71ba4-1c36-406d-a693-8091d60fa952":{prefix:"VOICEVOX Nemo:",isNemo:!0,name:"女声5",styles:[{name:"ノーマル",id:10008,type:"talk"}],terms:"",isSinger:!1},"3490c392-30be-44c2-8379-b77df27fa65e":{prefix:"VOICEVOX Nemo:",isNemo:!0,name:"女声6",styles:[{name:"ノーマル",id:10006,type:"talk"}],terms:"",isSinger:!1},"2171909e-d2d1-4bbb-aa45-442c12732665":{prefix:"VOICEVOX Nemo:",isNemo:!0,name:"男声1",styles:[{name:"ノーマル",id:10001,type:"talk"}],terms:"",isSinger:!1},"7ecc7a17-1465-4b22-a3b5-842a110ff55e":{prefix:"VOICEVOX Nemo:",isNemo:!0,name:"男声2",styles:[{name:"ノーマル",id:1e4,type:"talk"}],terms:"",isSinger:!1},"627b3e92-32c5-4c2f-860a-a5553d3d6662":{prefix:"VOICEVOX Nemo:",isNemo:!0,name:"男声3",styles:[{name:"ノーマル",id:10002,type:"talk"}],terms:"",isSinger:!1}};class Arrangeable{#k;#a7;#a8;#a9;#ba;#bb;constructor(e){this.#k=e,this.#k.innerHTML="",this.#a7=document.createElement("div"),e.appendChild(this.#a7),this.#a8=[],this.#a9=[],this.#ba=-1,this.#bb=-1}append(e){this.#a8.push(document.createElement("div")),this.#a7.appendChild(this.#a8.at(-1)),this.#a9.push(e);var t=this.#a8.length-1;this.#a8.at(-1).appendChild(e),this.#a8.at(-1).i=t,this.#a8.at(-1).c=t,this.#a8.at(-1).d=!1,this.#a8.at(-1).n=-1,-1==this.#ba?(this.#ba=this.#a8.length-1,this.#a8.at(-1).p=-1):this.#a8.at(-1).p=this.#bb,-1!=this.#bb&&(this.#a8.at(this.#bb).n=t),this.#bb=this.#a8.length-1;var i=document.createElement("div");i.align="right",i.appendChild(this.#bc("span","【上昇】",e=>{this.moveUp(t)})),i.appendChild(this.#bc("span","【削除】",e=>{this.delete(t)})),this.#a8.at(-1).b=i,e.appendChild(i)}delete(e){if(this.#a8.at(e).d=!0,this.#a8.at(e).innerHTML="",e==this.#ba&&e==this.#bb)this.#ba=-1,this.#bb=-1;else if(e==this.#ba)this.#ba=this.#a8.at(e).n,this.#a8.at(this.#ba).p=-1;else if(e==this.#bb)this.#bb=this.#a8.at(e).p,this.#a8.at(this.#bb).n=-1;else{var t=this.#a8.at(e).p,i=this.#a8.at(e).n;this.#a8.at(t).n=i,this.#a8.at(i).p=t}}moveUp(e){if(e==this.#ba&&e==this.#bb||e==this.#ba)return!1;if(e==this.#bb){var t=this.#a8.at(e).p;this.#a8.at(e).n,[this.#a8.at(t).c,this.#a8.at(e).c]=[this.#a8.at(e).c,this.#a8.at(t).c],this.#a8[t].appendChild(this.#a9[this.#a8[t].c]),this.#a8[e].appendChild(this.#a9[this.#a8[e].c]),this.#a9[this.#a8[t].c].appendChild(this.#a8[t].b),this.#a9[this.#a8[e].c].appendChild(this.#a8[e].b),this.#bb=t}else{var t=this.#a8.at(e).p;this.#a8.at(e).n,[this.#a8.at(t).c,this.#a8.at(e).c]=[this.#a8.at(e).c,this.#a8.at(t).c],this.#a8[t].appendChild(this.#a9[this.#a8[t].c]),this.#a8[e].appendChild(this.#a9[this.#a8[e].c]),this.#a9[this.#a8[t].c].appendChild(this.#a8[t].b),this.#a9[this.#a8[e].c].appendChild(this.#a8[e].b)}}#bc(ta,ts,tn){var tr=document.createElement(ta),td=document.createElement("span");return td.innerHTML=ts,td.setAttribute("style","color:#38488f;cursor:pointer;"),td.addEventListener("click",tn),tr.appendChild(td),tr}}class VoicevoxEngine{static #bd=0;static #be=!1;static ready(){document.getElementById("control-voicevox-engine")&&(document.getElementById("control-voicevox-engine").innerHTML=`<button onclick="VoicevoxEngine.init()">起動</button><p onclick="VoicevoxEngine.initDev()" style="color:#38488f;cursor:pointer;">開発者モードで起動</p>`);let e=localStorage.getItem("voicevox_origin"),t=localStorage.getItem("voicevox_origin_dev");window.addEventListener("message",i=>{(i.origin==e||i.origin==t)&&"control-voicevox-engine"==i.data.action&&VoicevoxEngine.onMessage(i.data.message)})}static init(){VoicevoxEngine.#be=!1,VoicevoxEngine.#bf(),VoicevoxEngine.#bg(10)}static initDev(){VoicevoxEngine.#be=!0,VoicevoxEngine.#bf(),VoicevoxEngine.#bg(10)}static #bg(to){document.getElementById("control-voicevox-editor-dev").innerHTML="",document.getElementById("control-voicevox-editor-talk").innerHTML="",document.getElementById("control-voicevox-editor-song").innerHTML="";document.getElementById("control-voicevox-engine").innerHTML=`<button disabled>起動</button> VOICEVOXエンジンを起動中... (${to})`,to>0?setTimeout(VoicevoxEngine.#bg,1e3,to-1):setTimeout(VoicevoxEngine.#bh,1e3)}static #bh(tc){let th=VoicevoxEngine.#bi("voicevox_talk_url");if(document.getElementById("control-voicevox-editor-talk").innerHTML=`<a href="${th}" target="blank">${th}</a>`,th=VoicevoxEngine.#bi("voicevox_song_url"),document.getElementById("control-voicevox-editor-song").innerHTML=`<a href="${th}" target="blank">${th}</a>`,VoicevoxEngine.#be){let tu=VoicevoxEngine.#bi("npm_cmd");document.getElementById("control-voicevox-editor-dev").innerHTML=`<p>【開発者向け】リンクをクリックする前に、次のコマンドでブラウザ版VOICEVOXエディターを起動してください。</p>
                <code style="background-color: #eee;border-radius: 3px;font-family: courier, monospace;padding: 0 3px;">${tu}</code>
                <p onclick="VoicevoxEngine.init()" style="color:#38488f;cursor:pointer;">（開発者モードを終了し、通常モードで起動）</p>
            `}else document.getElementById("control-voicevox-editor-dev").innerHTML="";VoicevoxEngine.#bj()}static statusUpdate(){document.getElementById("control-voicevox-engine-status-update").disabled=!0,VoicevoxEngine.#bj()}static async onStausUpdate(e){let t=await fetch(e),i=await t.json();var a="";"-"==i.count?a=`<button onclick="VoicevoxEngine.init()">起動</button> エンジン停止中`:VoicevoxEngine.#bd!=VoicevoxEngine.#bk()&&(a=`<button onclick="VoicevoxEngine.extend()" id="control-voicevox-engine-extend">延長</button> 稼働時間制限などの延長が可能です。`);document.getElementById("control-voicevox-engine").innerHTML=`<p>
<button id="control-voicevox-engine-status-update" onclick="VoicevoxEngine.statusUpdate()" disabled>ステータス更新</button> ${a}</p>
稼働時間制限: ${i.realTime}<br>
処理時間制限: ${i.execTime}<br>
実行時間制限: ${i.cpuTime}<br>
仮想記憶制限: ${i.vsz}<br>
物理記憶制限: ${i.vsz}<br>
補助記憶制限: ${i.disk}<br>
命令回数制限: ${i.count}<br>
        `,setTimeout(()=>{document.getElementById("control-voicevox-engine-status-update").disabled=!1},5e3)}static extend(){VoicevoxEngine.#bf(),document.getElementById("control-voicevox-engine-extend").remove(),VoicevoxEngine.statusUpdate()}static #bj(){let tl=VoicevoxEngine.#bi("engine");Voicevox.update({getEngineStatus:tl})}static #bf(){let t$=VoicevoxEngine.#bi("engine");return Voicevox.update({startEngine:t$}),VoicevoxEngine.#bd=VoicevoxEngine.#bk(),!0}static #bl(){let tp=VoicevoxEngine.#bi("engine");Voicevox.update({stopEngine:tp})}static #bk(){return Math.floor(new Date().getTime()/18e5)}static onMessage(e){console.log(e)}static #bi(t1){return VoicevoxEngine.#be&&(t1+="_dev"),localStorage.getItem(t1)}}class NoteABC{#k;#bm;#bn;#bo;#Z;#bp;#bq;#br;#bs;#bt;#bu;constructor(e){this.#k=e,this.#j(),this.#br=120,this.#bu="",this.#bs="",this.#bt=""}async #j(){this.#k.innerHTML="",this.#Z=document.createElement("textarea"),this.#Z.placeholder="ひらがなで歌詞を入力";var tb=document.createElement("button");tb.innerHTML="楽譜を生成",tb.style.width="100%",tb.addEventListener("click",e=>{this.makeScore()}),this.#bo=document.createElement("div"),this.#bp=document.createElement("div"),this.#bq=()=>{},this.#bp.addEventListener("change",e=>{this.#bq()}),this.#k.appendChild(this.#Z),this.#k.appendChild(tb),this.#k.appendChild(this.#bo),this.#k.appendChild(this.#bp)}getVoices(){if(0==this.#bn[0].lines.length)return[];for(var e=this.#bn[0].lines[0].staff[0].voices[0],t=[],i=0;i<e.length;i++){var a={duration:e[i].duration,lyric:e[i].lyric,pitches:e[i].pitches,midiPitches:e[i].midiPitches};t.push(a)}return t}#bv(tm){var tv=this.#bn[0].lines[0].staff[0].voices[0][tm],tg=tv.startChar,tf=tv.endChar;this.#bn[0].engraver.rangeHighlight(tg,tf)}getText(){return this.#Z.value}setText(e){this.#Z.value=e}getAbcText(){for(var e=this.getText().replaceAll("\r","").split("\n"),t=["","",""],i=0,a=0;a<e.length;a++)0===i&&"```tts.quest/abc"==e[a]?(t[i]+=e[a]+"\n",i=1):(1===i&&"```"==e[a]&&(i=2),t[i]+=e[a]+"\n");return 0===i?(this.#bs="",this.#bt="",t[i]):(this.#bs=t[0],this.#bt=t[2],t[1])}setAbcText(e){this.setText(this.#bs+e+"\n"+this.#bt)}makeScoreFromText(e){this.setAbcText(e),this.#bm=this.#bw(e),this.#bx(),this.#by(-1),this.#bv(0)}onBeforeMakeScore=()=>{};makeScore(){this.onBeforeMakeScore();var e=this.getAbcText();this.#bm=this.#bw(e),this.#bx(),this.#bv(0),this.#by(-1),this.#bz()}async #bx(ty){var tx=this.#bm,t_=this.#bA()+this.#bB(tx);this.#bn=ABCJS.renderAbc(this.#bo,t_,{clickListener:(e,t,i,a,s,n)=>{this.#bC(e,t,i,a,s,n)}}),this.#bo.style.overflowX="scroll",this.#bo.style.height="100%",this.setAbcText(this.#bD(tx)),(ty||0===ty)&&this.#bv(ty);var t2=new ABCJS.synth.CreateSynth;await t2.init({visualObj:this.#bn[0]}),await t2.prime()}#bC(tO,tE,tS,tk,tV,tA){this.#by(tV.index)}#by(t3){let t4=Math.max(0,t3);this.#bp.innerHTML="",this.#bm[t4].lyric;var t6,t0,tC,t5,tj=this.#bm[t4].code;t3>=0&&this.#bE(tj);var t7=tj.match(/[_=^]+/);t7=t7?t7.shift():"";var tw=tj.match(/[a-gA-Gz]/);tw=tw?tw.shift():"";var tT=tj.match(/[',]+/);tT=(tT=tT?tT.shift():"").replaceAll(",","").length-tT.replaceAll("'","").length;var tM=tj.match(/[0-9]\/[0-9]+/);tM?(tM=tM.shift(),[t6,t0]=tM.split("/"),tM=[parseInt(t6),parseInt(t0)]):(tM=tj.match(/\/[0-9]+/))?(tM=tM.shift(),[t6,t0]=tM.split("/"),tM=[1,parseInt(t0)]):tM=(tM=tj.match(/[0-9]+/))?[parseInt(tM=tM.shift()),1]:[1,1],[tC,t5]=tM;var t8=()=>"",tI=()=>"",tL=()=>0;"z"!=tw&&(t8=this.#bF(this.#bp,["__","_","=","^","^^"],t7),tI=this.#bF(this.#bp,["C","D","E","F","G","A","B"],tw),tL=this.#bF(this.#bp,[-2,-1,0,1,2],tT));var tP=document.createElement("center");tP.setAttribute("style","margin-bottom: 0.6em;");var tH=document.createElement("button");tH.innerHTML="←",tH.setAttribute("style","padding: 0.5rem 1rem;margin-right: 1vw;"),t4<=0?tH.disabled=!0:tH.addEventListener("click",e=>{this.#bv(t4-1),this.#by(t4-1)}),tP.appendChild(tH);var tN=this.#bG(tP,1,tC,31),tD=document.createElement("span");tD.innerHTML=" / ",tD.setAttribute("style","font-size: 1.6em;"),tP.appendChild(tD);var tX=this.#bG(tP,1,t5,16),tB=document.createElement("button");tB.innerHTML="→",tB.setAttribute("style","padding: 0.5rem 1rem;margin-left: 1vw;"),t4>=this.#bm.length-1?tB.disabled=!0:tB.addEventListener("click",e=>{this.#bv(t4+1),this.#by(t4+1)}),tP.appendChild(tB),this.#bp.appendChild(tP),this.#bq=()=>{var e="",t=t8();t?e+=t:e+=t7;var i=tI();i?e+=i:e+=tw;var a=tL();a?(-2==a&&(e+=",,"),-1==a&&(e+=","),1==a&&(e+="'"),2==a&&(e+="''")):e+="",tC=tN(),t5=tX(),1==tC&&1==t5?e+="":1==t5?e+=tC:1==tC?e+="/"+t5:e+=tC+"/"+t5,this.#bm[t4].code=e,this.#bx(t4),this.#bE(e)}}#bG(tz,tG,tR,tF){var tY=document.createElement("input");return tY.type="number",tY.value=tR,tY.setAttribute("min",tG),tY.setAttribute("max",tF),tY.setAttribute("style","font-size: 1.6em; width: 2em;"),tz.appendChild(tY),()=>tY.value}#bF(t9,tW,tU){var tK=document.createElement("fieldset");tK.setAttribute("class","radio-box-fieldset");for(var tq=this.#aC(16),tJ=0;tJ<tW.length;tJ++){var tZ=tq+"_"+tJ,tQ=!1,ie=tW[tJ];tU&&tU===ie&&(tQ=!0),this.#bH(tK,tZ,tq,ie,tQ)}return t9.appendChild(tK),()=>{var e=document.querySelector(`input[name="${tq}"]:checked`);return!!e&&!!e.value&&e.value}}#bH(it,ii,ia,is,ir){var id=document.createElement("input");id.type="radio",id.setAttribute("class","radio-box-input"),id.id=ii,id.name=ia,id.value=is,ir&&id.setAttribute("checked",!0);var io=document.createElement("label");io.setAttribute("class","radio-box-label"),io.setAttribute("for",ii),"__"===is&&(is="\uD834\uDD2B"),"_"===is&&(is="♭"),"="===is&&(is="♮"),"^"===is&&(is="♯"),"^^"===is&&(is="\uD834\uDD2A"),1===is&&(is="+1"),2===is&&(is="+2"),io.innerHTML=is,it.appendChild(id),it.appendChild(io)}setKey(e){this.#bu="",this.#bu=["Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"][(124+e)%12];var t=0;8<=e&&e<=19&&(t="+8"),20<=e&&e<=24&&(t="+8 octave=1"),-16<=e&&e<=-5&&(t="-8"),-24<=e&&e<=-17&&(t="-8 octave=-1"),t&&(this.#bu+=" treble"+t)}setBPM(e){this.#br=e}#bA(){var ic;return`M: 4/4
Q: ${this.#br}
K: ${this.#bu}
`}async #bz(){var ih=new ABCJS.synth.CreateSynth;await ih.init({visualObj:this.#bn[0]}),await ih.prime(),ih.start()}async #bE(iu){iu=this.#bA()+iu;var il=document.createElement("div"),i$=ABCJS.renderAbc(il,iu),ip=new ABCJS.synth.CreateSynth;await ip.init({visualObj:i$[0]}),await ip.prime(),ip.start()}#bw(i1){i1=(i1=(i1=(i1=(i1=i1.replaceAll(" ","")).replaceAll("\r","")).replaceAll("\n","")).replaceAll("	","")).replaceAll("　","");for(var ib=[{code:"",add:0}],im=0;im<i1.length;im++){var iv=this.#bI(im,i1);if(iv){ib.push({lyric:iv,code:"",add:1}),2==iv.length&&im++;continue}if("ー"==i1.at(im)){ib[ib.length-1].add++;continue}if("z"==i1[im]&&ib.push({lyric:"",code:"",add:1}),""===ib[ib.length-1].code){var ig=this.#bJ(im,i1);if(ig){ib[ib.length-1].code=ig,im+=ig.length-1;continue}}if("z"===ib[ib.length-1].code){ib[ib.length-1].add++;continue}ib.push({lyric:"",code:"z",add:1})}ib.shift();for(var im=0;im<ib.length;im++)""===ib[im].code&&(ib[im].code="C"),!this.#bK(ib[im].code)&&ib[im].add>1&&(ib[im].code+=""+ib[im].add);return ib}#bB(iy){for(var ix="",i_="w: ",i2=0;i2<iy.length;i2++){var iO=iy[i2].code,iE=iO.match(/[a-gA-G]/);ix+='"'+(iE=iE?iE.shift():"")+'"'+iO+" ",i_+=iy[i2].lyric+" "}return ix+"\n"+i_+"\n"}#bD(iS){for(var ik="",iV=0;iV<iS.length;iV++){var iA=iS[iV].code;ik+=iS[iV].lyric+iA+" "}return ik}#bJ(i3,i4){var i4=i4.slice(i3),i6=i4.match(/(^(\^|\^\^|_|__|=)?[a-gA-G][',]*[0-9]*(\/[0-9])?[0-9]*)|(^z[0-9]*(\/[0-9])?[0-9]*)/);return!!i6&&i6.shift()}#bI(i0,iC){var i5=iC.at(i0);if(i0+1<iC.length){var ij=i5+iC.at(i0+1);if(this.#bL.has(ij))return ij}return!!this.#bM.has(i5)&&i5}#bK(i7){if(i7.length<1)return!1;var iw=i7.charCodeAt(i7.length-1);return!!(48<=iw)&&!!(iw<=57)}#aC(iT){return btoa(String.fromCharCode(...crypto.getRandomValues(new Uint8Array(iT)))).substring(0,iT)}#bM=new Set(["あ","か","さ","た","な","は","ま","や","ら","い","き","し","ち","に","ひ","み","う","く","す","つ","ぬ","ふ","む","ゆ","え","け","せ","て","ね","へ","め","れ","お","こ","そ","と","の","ほ","も","よ","ん","が","ざ","り","っ","ぎ","る","ろ","わ","を","だ","ば","ぱ","じ","び","ぴ","ぐ","ず","ぶ","ぷ","げ","ぜ","で","べ","ぺ","ご","ぞ","ど","ぼ","ぽ"]);#bL=new Set(["いぇ","きゃ","しゃ","ちゃ","にゃ","ひゃ","みゃ","りゃ","ぎゃ","じゃ","つぁ","ふぁ","びゃ","ぴゃ","すぃ","とぅ","きゅ","しゅ","ちゅ","にゅ","ひゅ","みゅ","りゅ","ぎゅ","じゅ","うぃ","つぃ","ふぃ","びゅ","ぴゅ","てぃ","どぅ","きぇ","しぇ","ちぇ","にぇ","ひぇ","みぇ","りぇ","ぎぇ","じぇ","うぇ","つぇ","ふぇ","びぇ","ぴぇ","ずぃ","でゅ","きょ","しょ","ちょ","にょ","ひょ","みょ","りょ","ぎょ","じょ","うぉ","つぉ","ふぉ","びょ","ぴょ","でぃ","てゅ"])}class IssueNotification{static async #bN(iM){let i8=await fetch(`${iM}.json`),iI=await i8.json();return iI}static async add(e){let t=await IssueNotification.#bN(e),i=t.issue.status.is_closed;if(i)return;let a=t.issue.updated_on;localStorage.issueNotification||(localStorage.issueNotification="[]");var s=JSON.parse(localStorage.issueNotification);s.push({updated_on:a,is_closed:i,is_checked:!0,url:e}),localStorage.issueNotification=JSON.stringify(s)}static async update(){if(localStorage.issueNotification){for(var e=JSON.parse(localStorage.issueNotification),t=0;t<e.length;t++)e[t]=await IssueNotification.#bO(e[t]);localStorage.issueNotification=JSON.stringify(e),IssueNotification.#bP()}}static #bP(){if(localStorage.issueNotification){for(var iL=JSON.parse(localStorage.issueNotification),iP=0;iP<iL.length;iP++)iL[iP].is_checked||IssueNotification.#bQ(iL[iP].url);setTimeout(()=>{IssueNotification.#bP()},6e4)}}static async #bO(iH){if(iH.is_closed&&iH.is_checked)return iH;let iN=await IssueNotification.#bN(iH.url),iD=iN.issue.updated_on;if(iH.updated_on==iD)return iH;let iX=iN.issue.status.is_closed;return iH.updated_on=iD,iH.is_closed=iX,iH.is_checked=!1,iH}static #bQ(iB){let iz=`
<h3>起票したチケットが更新されました</h3>
投稿した質問・不具合報告・機能要望に返信があったか、<br>
起票したチケットに何かしらの反応がありました。<br>
<p><center><button onclick="IssueNotification.check('${iB}')">確認する</button></center></p>
        `;dialog.close(),dialog.payload.innerHTML=iz,dialog.showModal();let iG=iB.match(/[0-9]+/)[0];fetch(`https://ttsapis.com/v1/public/indicator/notify-issue/${iG}`)}static check(e){IssueNotification.#bR(e),window.open(e,"_blank").focus(),setTimeout(()=>{dialog.close()},100);let t=e.match(/[0-9]+/)[0];fetch(`https://ttsapis.com/v1/public/indicator/check-issue/${t}`)}static async #bR(iR){if(localStorage.issueNotification){for(var iF=JSON.parse(localStorage.issueNotification),iY=0;iY<iF.length;iY++)iF[iY].url==iR&&(iF[iY].is_checked=!0);localStorage.issueNotification=JSON.stringify(iF)}}}IssueNotification.update();function upgrader_3_7_0(){var e="upgrader_3_7_0";if(localStorage.getItem(e))return 0;if(localStorage.length){var r=JSON.stringify(localStorage);localStorage.clear(),localStorage.setItem(e,r);var t="data://application/json,"+encodeURIComponent(r);console.log(e),console.log(t)}else localStorage.setItem(e,"none")}upgrader_3_7_0();</script>
made by aaa
<center>
<a href="https://webapp.wiki/projects/erlang/wiki/main-page" rel="nofollow noopener noreferrer" target="_blank">使い方</a>
<b> ｜ </b>
<a id="redmine-issue-url" href="https://www.voicevox.su-shiki.com/issue#new" target="_blank">質問・報告・要望</a>
<b> ｜ </b>
<a href="https://webapp.wiki/projects/erlang/news" rel="nofollow noopener noreferrer" target="_blank">ニュース</a>
</center>
 
<script>
const redmine_issue_url = encodeURIComponent(location.href);
document.getElementById("redmine-issue-url").href = `https://www.voicevox.su-shiki.com/issue?redmine-issue-url=${redmine_issue_url}#new`;
</script>
 
<script type="module">
  fetch("https://ttsapis.com/v1/public/indicator/before-wasm");
  import init, { call } from "/js/call_wasm.js";
  init().then(() => {
    call();
    fetch("https://ttsapis.com/v1/public/indicator/after-wasm");
  });
</script>
</div>
 
<span id="test"></span>
<div class="voice" id="try" role="main">
<p>合成を試す</p>
<div id="main"></div>
<div id="settings" align="right"></div>
</div>
 
<script>
var voicevox = new Voicevox(document.getElementById('main'));
voicevox.setNotification('<c'+'enter><f'+'ont color="gray" class="loader">インスタンスを準備中…</f'+'ont></c'+'enter>');
ttsapisV1Alpha.onCreate =  () => {
    voicevox.clearNotifications();
}
ttsapisV1Alpha.onRestore = ttsapisV1Alpha.onError = ttsapisV1Alpha.onCaptcha = () => {
    voicevox.enable();
}
ttsapisV1Alpha.onInitError = () => {
    document.getElementById('main').innerHTML = 'バックエンドとの通信に失敗したため、この機能はご利用いただけません。ページをリロードしてください。';
    return false;
}
document.getElementById('settings').appendChild(Voicevox.genSettings());
</script>
 
 
 
<br>
</body>
</html>
